{"componentChunkName":"component---src-templates-blog-post-js","path":"/posts//2011/05/10/duostack_nodejs/","result":{"data":{"site":{"siteMetadata":{"title":"UKSTUDIO BLOG"}},"markdownRemark":{"id":"d1976ed9-a898-5a12-ae9d-d0ad8bd02b7e","excerpt":"npmがインストールされる場所は特に指定しなくても$HOME/localに入った。node.jsの位置でも見てるんだろうか。よくわからない。 duostackのインストールは-gオプションを付けないとnode_modulesディレクトリがカレントディレクトリに出来る。最初-g…","html":"<h2>node.jsのインストール</h2>\n何はともあれnode.jsのインストール。aptではなくgithubからリポジトリをcloneしてmakeした。最近はapt以外のものは$HOME/localに入れるルールでやってるのでnode.jsも同様に。node.jsをsudoで入れると結構ハマるみたいな話を聞くので特に理由がなければaptとかで入れるか$HOME以下に入れるのがよさそう。\n<pre>$ git clone git://github.com/joyent/node.git\n$ cd node\n$ ./configure --prefix=$HOME/local\n$ make\n$ make install\n$ which node\n/home/ukstuido/local/bin/node</pre>\n<h2>npmのインストール</h2>\nduostackを使うのにnpmが必要なのでnpmもインストール。curl使う方じゃなくてmakeしてインストールした。curl ... | sh の形式があまり好きじゃない程度の理由。\n<pre>$ git clone git://github.com/isaacs/npm.git\n$ cd npm\n$ make install\n$ which npm\n/home/ukstudio/local/bin/npm</pre>\n<p>npmがインストールされる場所は特に指定しなくても$HOME/localに入った。node.jsの位置でも見てるんだろうか。よくわからない。</p>\n<h2>duostackのインストール</h2>\nあらかじめ、<a href=\"https://www.duostack.com/\">Duostack</a>のアカウントは取っておくこと。結構すぐ登録確認メールが来る。\n<p>duostackのインストールは-gオプションを付けないとnode_modulesディレクトリがカレントディレクトリに出来る。最初-gオプションを知らなくて困惑した。</p>\n<pre>$ npm install -g duostack\n$ which duostack\n/home/ukstudio/local/bin/duostack</pre>\n<h2>アプリの作成とデプロイ</h2>\nここまで来ると<a href=\"http://docs.duostack.com/node/quick-start-guide#create-a-new-node-app\">Duostack · Docs: Quick Start Guide</a>に従うだけでOK。\n<p>適当なディレクトリを作ってそこにserver.jsを置く。</p>\n<pre>$ mkdir sample\n$ cd sample\n$ vim server.js</pre>\n<script src=\"http://gist.github.com/963569.js?file=gistfile1.js\"></script>\n<p>git initしてやる。</p>\n<pre>$ git init\n$ git add .\n$ git commit -m 'init'</pre>\n<p>duostackコマンドでアプリケーションを登録。ここで指定したアプリ名がそのままドメインになる。</p>\n<pre>$ duostack create ukstudio\n$ git push duostack master</pre>\n<p>無事にpushできればURLが表示されているはずなのでブラウザで確認する。今回の例だと<a href = \"http://ukstudio.duostack.net/\">http://ukstudio.duostack.net/</a>になる。</p>\n<p>こんな感じでduostackでnode.jsアプリを動かすところまで試してみた。herokuとかもそうだけど、こうサクッとアプリが動かせる環境があるのはうれしい。</p>\n<p>次はnode.js + CoffeeScriptとか、もうちょっとアプリらしいアプリを作ってみようかな。</p>\n<h2>追記: duostackでCoffeeScriptを動かす</h2>\nCoffeeScriptからコンパイルしたJavaScriptを乗せるんじゃなくて、CoffeeScriptそのものを乗せる方法。server.jsは必要っぽいのでそこからrequireする形にした。CoffeeScriptはアプリの中にインストールしておく。 これで一応動くことは動く。\n<pre>$ npm install coffee-script</pre>\n<script src=\"https://gist.github.com/964149.js\"> </script>","frontmatter":{"title":"duostackでnode.jsアプリを動かすまで","date":"May 10, 2011","description":null}},"previous":{"fields":{"slug":"posts//2011/05/09/build_vim/"},"frontmatter":{"title":"Vimをソースからビルド"}},"next":{"fields":{"slug":"posts//2011/05/14/mongodb_nodejs/"},"frontmatter":{"title":"mongodb + node.js を軽く試した"}}},"pageContext":{"id":"d1976ed9-a898-5a12-ae9d-d0ad8bd02b7e","previousPostId":"d1df31e8-6f6e-5614-a0df-b492b127a7b7","nextPostId":"6a7fb789-988a-5252-ab24-93445cb77a5a"}},"staticQueryHashes":["2841359383"]}