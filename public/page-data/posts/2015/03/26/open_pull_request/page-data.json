{"componentChunkName":"component---src-templates-blog-post-js","path":"/posts//2015/03/26/open_pull_request/","result":{"data":{"site":{"siteMetadata":{"title":"UKSTUDIO BLOG"}},"markdownRemark":{"id":"7c0ca9f7-f9cc-56c0-a272-9ddb2507bcbb","excerpt":"今日たまたまあるコミットが含まれているGitHubのPull Requestをサクッと探したい事案が発生した。というのも自分が以前書いたコードがどうしてこうなっているのかというのを知りたかったんだけど、commit messageだけじゃよくわからんかった(〜を実装したみたいなことを英語で書いてあっただけ)。 Pull…","html":"<p>今日たまたまあるコミットが含まれているGitHubのPull Requestをサクッと探したい事案が発生した。というのも自分が以前書いたコードがどうしてこうなっているのかというのを知りたかったんだけど、commit messageだけじゃよくわからんかった(〜を実装したみたいなことを英語で書いてあっただけ)。</p>\n<p>Pull Requestは割と丁寧に説明を書いているのできっとPull Requestのdescriptionを見ればわかりそうという感じはしたのだけれどパッとそれを開く手段がわからず、色々ググったりtwitterで教えてもらったりした結果下のようなfunctionをzshrcに書いた。</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token keyword\">function</span> find-<span class=\"token function-name function\">pr</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin class-name\">local</span> <span class=\"token assign-left variable\">parent</span><span class=\"token operator\">=</span><span class=\"token variable\">$2</span><span class=\"token operator\">||</span><span class=\"token string\">'master'</span>\n  <span class=\"token function\">git</span> log <span class=\"token variable\">$1</span><span class=\"token punctuation\">..</span><span class=\"token variable\">$2</span> --merges --ancestry-path --reverse --oneline <span class=\"token operator\">|</span> <span class=\"token function\">head</span> -n1\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> find-pr-<span class=\"token function-name function\">open</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin class-name\">local</span> <span class=\"token assign-left variable\">pr</span><span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span>find-pr $1 $2 <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'{print substr(<span class=\"token variable\">$5</span>, 2)}'</span><span class=\"token variable\">)</span></span>\"</span>\n  <span class=\"token builtin class-name\">local</span> <span class=\"token assign-left variable\">repo</span><span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">git</span> config --get remote.origin.url <span class=\"token operator\">|</span> <span class=\"token function\">sed</span> <span class=\"token string\">'s/git@github.com://'</span> <span class=\"token operator\">|</span> <span class=\"token function\">sed</span> <span class=\"token string\">'s/\\.git$//'</span><span class=\"token variable\">)</span></span>\"</span>\n  <span class=\"token function\">open</span> <span class=\"token string\">\"https://github.com/<span class=\"token variable\">${repo}</span>/pull/<span class=\"token variable\">${pr}</span>\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">find-pr-open REVISION</code></pre></div>\n<p>あまりシェルは得意ではないのでそこらへんは大目に見て欲しい。やってることはfind-prで該当のcommitが含まれているMerge commitを探してcommit messageからGitHub Pull Requestの番号を取り出している。リポジトリ名はgit configから取得して余計な文字はsedで削除。あとはURLを組み立ててブラウザで開くだけ。多分これでPull Requestを開けるはず。</p>\n<p>なんにせよcommit messageはもうちょっと丁寧に書こうと思いました。</p>","frontmatter":{"title":"特定のコミットが含まれるGitHub Pull Requestを開く","date":"March 26, 2015","description":null}},"previous":{"fields":{"slug":"posts//2015/03/20/vuejs/"},"frontmatter":{"title":"Vue.js便利"}},"next":{"fields":{"slug":"posts//2015/04/03/gihyo_scrum_book/"},"frontmatter":{"title":"スクラム実践入門読み終わった"}}},"pageContext":{"id":"7c0ca9f7-f9cc-56c0-a272-9ddb2507bcbb","previousPostId":"4a31e2f9-c4a9-5c19-b29a-87d907cf70e4","nextPostId":"a139d15a-7eb0-5169-b8b4-9e5e08314892"}},"staticQueryHashes":["2841359383"]}