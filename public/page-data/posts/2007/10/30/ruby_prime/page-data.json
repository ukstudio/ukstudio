{"componentChunkName":"component---src-templates-blog-post-js","path":"/posts//2007/10/30/ruby_prime/","result":{"data":{"site":{"siteMetadata":{"title":"UKSTUDIO BLOG"}},"markdownRemark":{"id":"e3e98b47-e10e-589c-9b14-27669aad49f8","excerpt":"引数に入れた値までの素数を配列で返すRubyのクラスを書いてみた。アルゴリズムはエラトステネスの篩を使用。\ngenerate_prime.rb generateprimetest.rb テスト結果 1 tests, 3 assertions, 0 failures, 0 errors…","html":"<p>引数に入れた値までの素数を配列で返すRubyのクラスを書いてみた。アルゴリズムは<a href=\"http://ja.wikipedia.org/wiki/%E3%82%A8%E3%83%A9%E3%83%88%E3%82%B9%E3%83%86%E3%83%8D%E3%82%B9%E3%81%AE%E7%AF%A9\">エラトステネスの篩</a>を使用。\n<strong>generate_prime.rb</strong></p>\n<pre lang=\"ruby\">\nclass GeneratePrime\n  def generate_prime(max_num)\n    if max_num < 2 then return nil\n    elsif max_num == 2 then return 2 end\n\n    search_list = (2..max_num).to_a # 探索リスト\n    prime_list = Array.new          # 素数リスト\n\n    # 素数の探索\n    begin\n      prime_list << search_list[0]\n      search_list.each_index{|i|\n        if search_list[i] % prime_list[-1] == 0 then\n          search_list.delete_at(i)  # 素数リストに加えた数の全ての倍数を削除\n        end\n      }\n    end while search_list[-1] > (prime_list[-1] * prime_list[-1])\n\n    # 素数リスト及び、探索リストに最後まで残っていた数が素数\n    return prime_list.concat(search_list)\n  end\nend</pre>\n<p><strong>generate<em>prime</em>test.rb</strong></p>\n<pre lang=\"ruby\">\nrequire 'test/unit'\nrequire 'generate_prime'\n\nclass TestGeneratePrime < Test::Unit::TestCase\n  def setup\n    @prime = GeneratePrime.new\n  end\n  def test_generate_prime\n    assert_equal(nil, @prime.generate_prime(1))\n    assert_equal([2,3,5,7], @prime.generate_prime(10))\n    assert_equal([2,3,5,7,11,13,17,19,23,29], @prime.generate_prime(30))\n  end\nend</pre>\n<p><strong>テスト結果</strong></p>\n</pre><pre>\n% ruby generate_prime_test.rb\nLoaded suite generate_prime_test\nStarted\n.\nFinished in 0.000454 seconds.\n<p>1 tests, 3 assertions, 0 failures, 0 errors</pre>\nテストが不十分な気もするけど多分大丈夫なはず。・・・多分。</p>","frontmatter":{"title":"Rubyで素数を求めるプログラムを書いた","date":"October 30, 2007","description":null}},"previous":{"fields":{"slug":"posts//2007/10/28/activerecord/"},"frontmatter":{"title":"ActiveRecordを使ってみる"}},"next":{"fields":{"slug":"posts//2007/11/01/ruby_fizzbuzz_2/"},"frontmatter":{"title":"RubyでFizzBuzz"}}},"pageContext":{"id":"e3e98b47-e10e-589c-9b14-27669aad49f8","previousPostId":"fdbd5936-2332-5fa3-9266-9f586e630578","nextPostId":"e8cee735-9ee9-5259-863d-087eaecfac52"}},"staticQueryHashes":["2841359383"]}