{"componentChunkName":"component---src-templates-blog-post-js","path":"/2010/02/17/install_clojure_vimclojure/","result":{"data":{"site":{"siteMetadata":{"title":"UKSTUDIO BLOG"}},"markdownRemark":{"id":"7d5bc481-bb8b-57f3-8fca-ed479b23f84b","excerpt":"結構時間かかった。今日(正確には昨日)の夕方からずっといじってた。まとめるとそんな時間かかるようなものでもないんだけどね。clojureよりvimclojureで色々手間取った。ちなみにプログラミング Clojureのサンプルを動かすだけなら、サンプルコードの中にClojureの実行環境(REPL…","html":"<p>結構時間かかった。今日(正確には昨日)の夕方からずっといじってた。まとめるとそんな時間かかるようなものでもないんだけどね。clojureよりvimclojureで色々手間取った。ちなみに<a href='http://www.amazon.co.jp/gp/product/4274067890?linkCode=shr&camp=1207&creative=8411&tag=ukstudio0c-22' target='_blank'>プログラミング Clojure</a>のサンプルを動かすだけなら、サンプルコードの中にClojureの実行環境(REPL)が含まれてるので以下の設定をやる必要はなし。</p>\n<h2>clojureのインストール</h2>\nソースはgithubから落としてくる。masterでもいいんだけど、clojure-contribの方がmasterだとうまくbuildできなかったので1.1.0を使うことにした。\n<pre>\n$ git clone git://github.com/richhickey/clojure.git\n$ cd clojure\n$ git co -b 1.1.0 1.1.0\n$ ant\n</pre>\n<h2>clojure-contribのインストール</h2>\nプログラミング Clojureではcontribのライブラリを結構使うみたいなのでこちらもインストール。\n<pre>\n$ git clone git://github.com/rechhickey/clojure-contrib.git\n$ cd clojure-contrib\n$ git co -b 1.1.0 1.1.0\n$ ant -Dclojure.jar=/github/clojure/clojure.jar\n</pre>\n<h2>REPLの起動</h2>\n<pre>\n$ java -cp /github/clojure/clojure.jar:/github/clojure/clojure-contrib.jar clojure.main\n</pre>\n<p>これで無事REPLが起動すればOK。contribが使えるか気になる人は試しにuseなどしてみるといい。エラーがでずにnilが返ってくればOK。</p>\n<pre>\nuser=> (use 'clojure.contrib.str-utils)\nnil\n</pre>\n<h2>起動コマンド</h2>\nいつもjava -cpとかやるのは面倒なので起動コマンドを使う。\n<pre>\n$ mkdir ~/.clojure\n$ ln -s /github/clojure/clojure.jar ~/.clojure\n$ ln -s /github/clojure-contrib/clojure-contrib.jar ~/.clojure\n$ export CLOJURE_EXT=~/.clojure\n$ alias clj=/github/clojure-contrib/launchers/bash/clj-env-dir\n</pre>\n<p>clojure-contribに起動用のスクリプトがあるのでそれを使う。CLOJURE_EXTにjarのあるディレクトリを指定する必要があるため、適当なディレクトリを作り、そこにjarを入れておく。あとは適当にaliasはるか、実行パスのあるところにファイルを置けばよい。</p>\n<h2>vimclojureのインストール</h2>\nvimclojureもリポジトリから落としてくる。tip(masterとかtrunkと同義)だとBuildツールがantじゃなくてgradleになってるけど、うまくbuild出来なかったので2.1.2を使う。\n<pre>\n$ hg clone http://bitbucket.org/kotarak/vimclojure/\n$ cd vimclojure\n$ hg co -r v2.1.2\n</pre>\n<p>/path/to/vimclojureにlocal.propertiesというファイルを作る。</p>\n<pre>\nclojure.jar = /home/user/.clojure/clojure.jar\nclojure-contrib = /home/user/.clojure/clojure-contrib.jar\nnailgun-client = ng\nvimdir = /home/user/.vim\n</pre>\n<p>そしてbuild。</p>\n<pre>\n$ cd /path/to/vimclojure\n$ ant\n$ ant install\n</pre>\n<p>antでbuild、ant installでvimdirにpluginとかがインストールされる。vimrcを設定すれば、この時点でsyntax-highlightとかOmni補完とかは使えるようになっているはず。</p>\n<h2>VimでREPL</h2>\nvimでREPLなどの機能を使うためにはng-serverを立ち上げる必要がある。CLASSPATHにjarが設定されていないといけないみたいなので設定する。\n<pre>\n$ export CLASSPATH=$CLOJURE_EXT/clojure.jar:$CLOJURE_EXT/clojure-contrib.jar:/path/to/vimclojure.jar\n$ sh bin/ng-server\nNGServer started on 127.0.0.1, port 2113.\n</pre>\n<p>そして、vimrcの修正。syntax highlightの設定なども含む。</p>\n<pre>\n\" vimclojure\nlet clj_highlight_builtins = 1\nlet clj_highlight_contrib = 1\nlet clj_paren_rainbow = 1\nlet clj_want_gorilla = 1\nlet vimclojure#NailgunClient = \"/path/to/vimclojure/ng\"\n</pre>\n<p>適当なclojureのファイルを開く。使い方は<code>:help clojure.vim</code>を見ればよい。とりあえず、REPLの起動は<code>&#x3C;LocalLeader>sr</code>。\n<img src=\"http://173.230.148.68/wp-content/uploads/2010/02/vimclojure.jpg\" alt=\"vimclojure\" title=\"vimclojure\" width=\"618\" height=\"465\" class=\"alignnone size-full wp-image-561\"></p>\n<p>これで一通り設定完了。結構時間がかかったけど、大体詰まるところはCLASSPATHまわりだったのでもしうまく動かなかったらまずそこを確認した方がいいかも。</p>\n<p>良いclojure + vimライフを。</p>\n<p>参考:\n<a href='http://kotka.de/projects/clojure/vimclojure.html'>Kotka : Projects : Clojure : VimClojure</a>\n<a href='http://en.wikibooks.org/wiki/Clojure_Programming/Getting_Started'>Clojure Programming/Getting Started - Wikibooks, collection of open-content textbooks</a></p>\n<iframe src=\"http://rcm-jp.amazon.co.jp/e/cm?lt1=_blank&bc1=000000&IS2=1&bg1=FFFFFF&fc1=000000&lc1=0000FF&t=ukstudio0c-22&o=9&p=8&l=as1&m=amazon&f=ifr&md=1X69VDGQCMF7Z30FM082&asins=4274067890\" scrolling=\"no\" marginwidth=\"0\" marginheight=\"0\" frameborder=\"0\"></iframe>","frontmatter":{"title":"clojure+vimclojureのインストール","date":"February 17, 2010","description":null}},"previous":{"fields":{"slug":"/2010/02/17/clojure_fizzbuzz/"},"frontmatter":{"title":"ClojureでFizzBuzz"}},"next":{"fields":{"slug":"/2010/03/02/tokyorubykaigi03/"},"frontmatter":{"title":"東京Ruby会議03にスタッフとして参加した"}}},"pageContext":{"id":"7d5bc481-bb8b-57f3-8fca-ed479b23f84b","previousPostId":"8e974f95-e609-5958-ab19-81eb47f76344","nextPostId":"b13cf973-e863-5906-9014-c81802331f91"}},"staticQueryHashes":["2841359383"]}