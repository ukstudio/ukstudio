{"componentChunkName":"component---src-templates-blog-post-js","path":"/2010/09/10/password_edit/","result":{"data":{"site":{"siteMetadata":{"title":"UKSTUDIO BLOG"}},"markdownRemark":{"id":"46af2199-60be-598b-9c76-3b34c28bae5e","excerpt":"ちょっと色々わからなくなったので、誰かのアドバイスを期待してここに書く。 簡単に前提を書くと、UserモデルのCRUDとは別にUserのパスワードを変更する画面が必要になった。Usersコントローラにpassword_editみたいなaction…","html":"<p>ちょっと色々わからなくなったので、誰かのアドバイスを期待してここに書く。</p>\n<p>簡単に前提を書くと、UserモデルのCRUDとは別にUserのパスワードを変更する画面が必要になった。Usersコントローラにpassword_editみたいなactionを書くのもあまりきれいじゃないなと思ってコントローラを分けることにした。</p>\n<pre><code>resources :users do\n  resource :password\nend\n</code></pre>\n<p>確実にUserのレコードは必要になるので上記の用にネストさせることにした。ここで気になるのがpasswordのコントローラ名。通常PasswordsControllerになる。ただ、PasswordsController内の処理は確実にUserに依存する処理が入るため、これはこれであまりしっくりこない。別にPasswordsControllerを他で使う予定があるわけじゃないけど、User::PasswordsControllerの方がいい気がする。</p>\n<pre><code>resources :users do\n  resource :password, :only => :edit, :module => 'user'\nend\n</code></pre>\n<pre><code># app/controllers/user/passwords_controller.rb\nmodule User\n  PasswordController < ApplicationController::Base\n</code></pre>\n<p>ただ、たかがあるモデルのカラムの為にここまでする必要があるのか?そもそもリソースじゃないよなと思ったりもするわけで。やっぱりUsersコントローラにactionを用意する程度に留めるべきなのだろうか。</p>\n<h3>追記:10/09/11</h3>\nやっぱりコントローラを作る(というよりresourcesを追加するのが)がおかしいと思いはじめ、結局気にしてるのはURLなので以下のようにしてみようかなと思う。\n<pre><code>resources :user do\n  match 'password/edit' => 'users#password_edit'\nend\n</code></pre>","frontmatter":{"title":"パスワード変更の機能をどこにもたせるべきか","date":"September 10, 2010","description":null}},"previous":{"fields":{"slug":"/2010/09/05/sla/"},"frontmatter":{"title":"外国語学習の科学"}},"next":{"fields":{"slug":"/2010/09/10/mitakarb10/"},"frontmatter":{"title":"mitaka.rb#10に参加してきました"}}},"pageContext":{"id":"46af2199-60be-598b-9c76-3b34c28bae5e","previousPostId":"98404246-3087-5f1c-b989-7d0e3f8092e4","nextPostId":"f26db468-b50a-5bb0-ae9a-b84a1eb8fdad"}},"staticQueryHashes":["2841359383"]}