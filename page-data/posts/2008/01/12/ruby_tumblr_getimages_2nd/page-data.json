{"componentChunkName":"component---src-templates-blog-post-js","path":"/posts/2008/01/12/ruby_tumblr_getimages_2nd/","result":{"data":{"site":{"siteMetadata":{"title":"UKSTUDIO BLOG"}},"markdownRemark":{"id":"4a9e2c06-8dc8-59ed-9ca0-2b4a5d74f996","excerpt":"Tumblrの全画像を取得するRubyスクリプトを書いた・・・けど 上のエントリーのコードを書き直した。これで10kb未満の画像でも問題ないはず。それとTumblrのIDを引数で与えるようにも修正した。独自ドメインのやつには対応してないです。ごめんなさい。 あとこっそりCodeReposにCommit…","html":"<p><a href=\"http://uk-studio.net/2008/01/11/ruby_tumblr_getimages/\">Tumblrの全画像を取得するRubyスクリプトを書いた・・・けど</a></p>\n<p>上のエントリーのコードを書き直した。これで10kb未満の画像でも問題ないはず。それとTumblrのIDを引数で与えるようにも修正した。独自ドメインのやつには対応してないです。ごめんなさい。</p>\n<p>あとこっそり<a href=\"http://coderepos.org/share/browser/lang/ruby/misc/tumblr_getimages.rb\">CodeReposにCommitした</a>ので、煮るなり焼くなりお好きにどうぞ。</p>\n<pre lang=\"ruby\">\nrequire 'open-uri'\nrequire 'rexml/document'\nrequire 'FileUtils'\n\nif ARGV.size != 1\n  puts \"Usage: #{$0} [id] \"\n  exit\nend\n\nid = ARGV[0]\n\nres = open(url)\ndoc = REXML::Document.new(res.read)\ntotal = REXML::XPath.first(doc, \"/tumblr/posts\").attributes['total'].to_i\n\n0.step(total, 50){|n|\n  image_list = []\n  res = open(url + \"&start=#{n}\")\n  doc = REXML::Document.new(res.read)\n  data = REXML::XPath.match(doc, \"/tumblr/posts/post\")\n  data.each{|i| image_list < < i.elements['photo-url'].text }\n\n  image_list.each{|image_url|\n    open(image_url) do |image|\n      open(image_url.split(/\\//).last, \"w\") do |local_image|\n        local_image.write(image.read)\n      end\n    end\n  }\n}\n</pre></pre>","frontmatter":{"title":"Tumblrの全画像を取得するRubyスクリプト改","date":"January 12, 2008","description":null}},"previous":{"fields":{"slug":"/2008/01/12/blog/"},"frontmatter":{"title":"オレがブログを書く理由"}},"next":{"fields":{"slug":"/2008/01/22/yaboo/"},"frontmatter":{"title":"野望新年会に参加してきました"}}},"pageContext":{"id":"4a9e2c06-8dc8-59ed-9ca0-2b4a5d74f996","previousPostId":"5171b59f-b9b6-5e55-ad08-5f94ef159dc6","nextPostId":"b77f29b8-a241-5309-b3fa-3dabe21d08c9","canonical":"https://ukstudio.jp/2008/01/12/ruby_tumblr_getimages_2nd/"}},"staticQueryHashes":["2841359383"]}