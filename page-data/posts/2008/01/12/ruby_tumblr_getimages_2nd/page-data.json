{"componentChunkName":"component---src-templates-blog-post-js","path":"/posts//2008/01/12/ruby_tumblr_getimages_2nd/","result":{"data":{"site":{"siteMetadata":{"title":"UKSTUDIO BLOG"}},"markdownRemark":{"id":"60113f26-f2db-5eba-b711-6774bc363568","excerpt":"Tumblrの全画像を取得するRubyスクリプトを書いた・・・けど 上のエントリーのコードを書き直した。これで10kb未満の画像でも問題ないはず。それとTumblrのIDを引数で与えるようにも修正した。独自ドメインのやつには対応してないです。ごめんなさい。 あとこっそりCodeReposにCommit…","html":"<p><a href=\"http://uk-studio.net/2008/01/11/ruby_tumblr_getimages/\">Tumblrの全画像を取得するRubyスクリプトを書いた・・・けど</a></p>\n<p>上のエントリーのコードを書き直した。これで10kb未満の画像でも問題ないはず。それとTumblrのIDを引数で与えるようにも修正した。独自ドメインのやつには対応してないです。ごめんなさい。</p>\n<p>あとこっそり<a href=\"http://coderepos.org/share/browser/lang/ruby/misc/tumblr_getimages.rb\">CodeReposにCommitした</a>ので、煮るなり焼くなりお好きにどうぞ。</p>\n<pre lang=\"ruby\">\nrequire 'open-uri'\nrequire 'rexml/document'\nrequire 'FileUtils'\n\nif ARGV.size != 1\n  puts \"Usage: #{$0} [id] \"\n  exit\nend\n\nid = ARGV[0]\n\nres = open(url)\ndoc = REXML::Document.new(res.read)\ntotal = REXML::XPath.first(doc, \"/tumblr/posts\").attributes['total'].to_i\n\n0.step(total, 50){|n|\n  image_list = []\n  res = open(url + \"&start=#{n}\")\n  doc = REXML::Document.new(res.read)\n  data = REXML::XPath.match(doc, \"/tumblr/posts/post\")\n  data.each{|i| image_list < < i.elements['photo-url'].text }\n\n  image_list.each{|image_url|\n    open(image_url) do |image|\n      open(image_url.split(/\\//).last, \"w\") do |local_image|\n        local_image.write(image.read)\n      end\n    end\n  }\n}\n</pre></pre>","frontmatter":{"title":"Tumblrの全画像を取得するRubyスクリプト改","date":"January 12, 2008","description":null}},"previous":{"fields":{"slug":"posts//2008/01/12/blog/"},"frontmatter":{"title":"オレがブログを書く理由"}},"next":{"fields":{"slug":"posts//2008/01/22/yaboo/"},"frontmatter":{"title":"野望新年会に参加してきました"}}},"pageContext":{"id":"60113f26-f2db-5eba-b711-6774bc363568","previousPostId":"d4aed904-6971-550a-bcef-2bd3a90d909f","nextPostId":"36cc028a-484f-5419-b24f-7c52e3fde3b2"}},"staticQueryHashes":["2841359383"]}