{"componentChunkName":"component---src-templates-blog-post-js","path":"/2008/06/04/rails_for_beginner/","result":{"data":{"site":{"siteMetadata":{"title":"UKSTUDIO BLOG"}},"markdownRemark":{"id":"2e32a1f3-b272-5dba-a71d-e7ea4bf7c82a","excerpt":"オレもRailsを初めて3ヶ月(もうちょいあるかも)たったので、ある程度オレの経験を元にまとめてみる。参考になるといいなー。 thx、faultier。 あとはオマケ的な指摘だけど、Railsが2系であればビューファイルの拡張子は「.rhtml」より「.html.erb」の方がいい。この辺はActionPack…","html":"<p>オレもRailsを初めて3ヶ月(もうちょいあるかも)たったので、ある程度オレの経験を元にまとめてみる。参考になるといいなー。</p>\n<h2>1. まずはアプリケーションを実際に動作させる</h2>\n<pre lang=\"bash\">\n% ruby script/server\n</pre>\nとりあえずコード読む前にそのアプリケーションがどんなものを把握するのが重要。コード読んでもわかるだろうけど、実際にブラウザでいじくりまわした方がはやく理解できると思う。その時にコントローラー名とアクション名もみといた方がよさげ。\n<h2>2. モデル図を書く</h2>\nこれはid:Hash本人も重要って書いてたけど、ほんとに重要。そんなにキレイな図とかじゃなくていいから、紙とかに多対多なのか1対多なのかとか、参照名はなにかとかぐらいメモがてら書いておくと吉。モデルの関連さえ把握できれば、そのRailsアプリの半分以上理解できたも同然ってぐらい重要。\n<h2>3. Logをみる</h2>\n<pre lang=\"bash\">\n% tail -f log/development.log\n</pre>\n開発時にも言えることだけどなるべくLogはみた方がいい。log/の下にdevelopment.log(多分ないと思うけど、productionで動作させてるならproduction.log)があるのでtailコマンドとかでみるといい。フォームのsubmit時のパラメータが見れたり、あとはlogger.infoで出力をチェックしたりとかできる。\n<h2>4. script/consoleを使う</h2>\n<pre lang=\"bash\">\n% ruby ./script/console\n</pre>\n基本的な使い勝手はirbと同じ。irbと違うのはRails環境があらかじめロードされていること。例えば、モデルのメソッド名を呼び出したりとか。メソッドレベルで動作をみたい場合に便利。あと、2.0以降からモデル名を入力するとカラムの一覧も表示される。\n<pre lang=\"ruby\">\n>> User\n=> User(id: integer,  created_at: datetime, updated_at: datetime)\n>> User.find(:all)\n=> []\n>> user = User.new\n=> #<user id: nil, created_at: nil, updated_at: nil>\n</pre>\n<h2>test(or spec)があれば見る *追記08/06/04*</h2>\n<blockquote>\nできれば「test(or spec)があれば、見ろ」も入れて欲しい。\nあれは「どういう挙動をして欲しいか」=「どう使うか」が書いてあるんだから、\nどんな構造のアプリなんだか理解する助けになるよ。\nてか、ならないなら書く意味ないもの。\n</blockquote>\nコメント欄での指摘。このエントリを書こうと決めたときは書くつもりだったのに、実際に書いたら忘れてたっていう。\n<p>thx、faultier。</p>\n<h2>まとめとオマケ</h2>\nなんかTips的なエントリになったけど、とりあえずざっと思いついたのはこんな感じ。あとはコントローラのアクションからスタートして、モデルのメソッドや一連の流れを追えばいいんじゃないかな。コントローラーのアクションも上から順に読むよりは、機能ごとの流れで追った方がいいと思う。例えば、new->create->showとかedit->update->showとか。実際はもうちょい複雑な場合もあるだろうけど。実際の流れがどんな風になってるかは実際にアプリを動かしながらURLを確認したり、ログの出力やビューのフォームのアクションを見れば大体わかるはず。\n<p>あとはオマケ的な指摘だけど、Railsが2系であればビューファイルの拡張子は「.rhtml」より「.html.erb」の方がいい。この辺はActionPackのマルチビューに関係してる。この辺は初心者のうちはとりあえず「.html.erb」にしとくぐらいでいいと思うし、なによりオレがマルチビューについてまだちゃんと理解してないので詳細ははぶく。ｻｰｾﾝ｡</p>\n<p>respond_toは1つのアクションで複数のフォーマットを出力するときに使う。</p>\n<pre lang=\"ruby\">\nrespond_to do |format|\n  format.html\n  format.xml { render :xml => @user }\nend\n</pre>\n<p>上記のように書くと、ブラウザからの通常アクセス時はhtmlを、WebサービスなどでXMLを指定された場合はXMLを出力する。Webアプリは、例えばブラウザからのアクセスとAPIでのアクセスで、処理は同じだけど出力が違うなんてことがあったりする。そういうときにrespond_toで指定してやることで無闇にアクションを増やさなくてすむ。</p>\n<table border=\"0\" cellpadding=\"5\"><tbody><tr><td colspan=\"2\"><a href=\"http://www.amazon.co.jp/gp/redirect.html%3FASIN=4797336625%26tag=2004-05-22%26lcode=xm2%26cID=2025%26ccmID=165953%26location=/o/ASIN/4797336625%253FSubscriptionId=0G91FPYVW6ZGWBH4Y9G2\" target=\"_top\">Rails&#x30EC;&#x30B7;&#x30D4;&#x30D6;&#x30C3;&#x30AF; 183&#x306E;&#x6280;</a><img src=\"http://www.assoc-amazon.jp/e/ir?t=2004-05-22&amp;l=ur2&amp;o=9\" width=\"1\" height=\"1\" border=\"0\" alt></td></tr><tr><td valign=\"top\"><a href=\"http://www.amazon.co.jp/gp/redirect.html%3FASIN=4797336625%26tag=2004-05-22%26lcode=xm2%26cID=2025%26ccmID=165953%26location=/o/ASIN/4797336625%253FSubscriptionId=0G91FPYVW6ZGWBH4Y9G2\" target=\"_top\"><img src=\"http://ecx.images-amazon.com/images/I/419FtZYCmyL._SL160_.jpg\" border=\"0\" alt=\"Rails&#x30EC;&#x30B7;&#x30D4;&#x30D6;&#x30C3;&#x30AF; 183&#x306E;&#x6280;\"></a></td><td valign=\"top\"><font size=\"-1\">&#x9AD8;&#x6A4B; &#x5F81;&#x7FA9;<br><br>&#x30BD;&#x30D5;&#x30C8;&#x30D0;&#x30F3;&#x30AF;&#x30AF;&#x30EA;&#x30A8;&#x30A4;&#x30C6;&#x30A3;&#x30D6;  2008-05-31<br>&#x58F2;&#x308A;&#x4E0A;&#x3052;&#x30E9;&#x30F3;&#x30AD;&#x30F3;&#x30B0; : 1080<br><br><br><a href=\"http://www.amazon.co.jp/gp/redirect.html%3FASIN=4797336625%26tag=2004-05-22%26lcode=xm2%26cID=2025%26ccmID=165953%26location=/o/ASIN/4797336625%253FSubscriptionId=0G91FPYVW6ZGWBH4Y9G2\" target=\"_top\">Amazon&#x3067;&#x8A73;&#x3057;&#x304F;&#x898B;&#x308B;</a></font><font size=\"-2\"> by <a href=\"http://www.goodpic.com/mt/aws/index.html\">G-Tools</a></font></td></tr></tbody></table>\n<table border=\"0\" cellpadding=\"5\"><tbody><tr><td colspan=\"2\"><a href=\"http://www.amazon.co.jp/gp/redirect.html%3FASIN=4274066967%26tag=2004-05-22%26lcode=xm2%26cID=2025%26ccmID=165953%26location=/o/ASIN/4274066967%253FSubscriptionId=0G91FPYVW6ZGWBH4Y9G2\" target=\"_top\">Rails&#x306B;&#x3088;&#x308B;&#x30A2;&#x30B8;&#x30E3;&#x30A4;&#x30EB;Web&#x30A2;&#x30D7;&#x30EA;&#x30B1;&#x30FC;&#x30B7;&#x30E7;&#x30F3;&#x958B;&#x767A; &#x7B2C;2&#x7248;</a><img src=\"http://www.assoc-amazon.jp/e/ir?t=2004-05-22&amp;l=ur2&amp;o=9\" width=\"1\" height=\"1\" border=\"0\" alt></td></tr><tr><td valign=\"top\"><a href=\"http://www.amazon.co.jp/gp/redirect.html%3FASIN=4274066967%26tag=2004-05-22%26lcode=xm2%26cID=2025%26ccmID=165953%26location=/o/ASIN/4274066967%253FSubscriptionId=0G91FPYVW6ZGWBH4Y9G2\" target=\"_top\"><img src=\"http://ecx.images-amazon.com/images/I/51Y%2BviLzM5L._SL160_.jpg\" border=\"0\" alt=\"Rails&#x306B;&#x3088;&#x308B;&#x30A2;&#x30B8;&#x30E3;&#x30A4;&#x30EB;Web&#x30A2;&#x30D7;&#x30EA;&#x30B1;&#x30FC;&#x30B7;&#x30E7;&#x30F3;&#x958B;&#x767A; &#x7B2C;2&#x7248;\"></a></td><td valign=\"top\"><font size=\"-1\">&#x524D;&#x7530; &#x4FEE;&#x543E; <br><br>&#x30AA;&#x30FC;&#x30E0;&#x793E;  2007-10-26<br>&#x58F2;&#x308A;&#x4E0A;&#x3052;&#x30E9;&#x30F3;&#x30AD;&#x30F3;&#x30B0; : 8708<br><br><strong>&#x304A;&#x3059;&#x3059;&#x3081;&#x5E73;&#x5747;  </strong><img src=\"http://g-images.amazon.com/images/G/01/detail/stars-5-0.gif\" alt=\"star\"><br><img src=\"http://g-images.amazon.com/images/G/01/detail/stars-5-0.gif\" alt=\"star\">&#x5145;&#x5B9F;&#x3057;&#x305F;&#x5185;&#x5BB9;&#x3067;&#x308F;&#x304B;&#x308A;&#x3084;&#x3059;&#x3044;<br><img src=\"http://g-images.amazon.com/images/G/01/detail/stars-5-0.gif\" alt=\"star\">rails&#x304C;&#x826F;&#x3044;&#x306E;&#x304B;ruby&#x304C;&#x826F;&#x3044;&#x306E;&#x304B;&#x672C;&#x304C;&#x826F;&#x3044;&#x306E;&#x304B;<br><img src=\"http://g-images.amazon.com/images/G/01/detail/stars-5-0.gif\" alt=\"star\">&#xFF11;&#x65E5;&#x306B;&#x5C11;&#x3057;&#x306E;&#x6642;&#x9593;&#x3067;&#x6210;&#x679C;&#x304C;&#x5206;&#x304B;&#x308B;&#xFF11;&#x518A;<br><br><a href=\"http://www.amazon.co.jp/gp/redirect.html%3FASIN=4274066967%26tag=2004-05-22%26lcode=xm2%26cID=2025%26ccmID=165953%26location=/o/ASIN/4274066967%253FSubscriptionId=0G91FPYVW6ZGWBH4Y9G2\" target=\"_top\">Amazon&#x3067;&#x8A73;&#x3057;&#x304F;&#x898B;&#x308B;</a></font><font size=\"-2\"> by <a href=\"http://www.goodpic.com/mt/aws/index.html\">G-Tools</a></font></td></tr></tbody></table>","frontmatter":{"title":"RE:Rails初心者はどうやって他人のRailsコードを読めばいいか","date":"June 04, 2008","description":null}},"previous":{"fields":{"slug":"/2008/05/27/rawhide-designer/"},"frontmatter":{"title":"RAWHIDE.ではデザイナを募集しています。"}},"next":{"fields":{"slug":"/2008/06/05/rails_vim_rspec/"},"frontmatter":{"title":"rails.vimのファイル切り替えをRSpecに対応させる(仮)"}}},"pageContext":{"id":"2e32a1f3-b272-5dba-a71d-e7ea4bf7c82a","previousPostId":"231d7ea9-1f5c-5358-ab73-738e4cb714ba","nextPostId":"e72e17b0-f5be-5da5-a663-6e8aad2af2de"}},"staticQueryHashes":["2841359383"]}