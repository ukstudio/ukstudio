<!DOCTYPE html><html><head><meta charset="utf-8" /><!--Always force latest IE rendering engine or request Chrome Frame--><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><!--Use title if it's in the page YAML frontmatter--><title>ukstudio.jp</title><link href="http://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet" type="text/css" /><link href="http://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet" type="text/css" /><link href="/stylesheets/normalize.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/all.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/highlight.css" media="screen" rel="stylesheet" type="text/css" /><script src="/javascripts/all.js" type="text/javascript"></script><link href="/feed.xml" rel="alternate" title="atom" type="application/atom+xml" /><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-12755601-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body class="page page_2 page_2_index"><div class="header"><div class="header-navigation"><ul><li><i class="fa fa-twitter"></i><a href="http://twitter.com/ukstudio">Twitter</a></li><li><i class="fa fa-github-alt"></i><a href="http://github.com/ukstudio">GitHub</a></li></ul></div><div class="header-title"><a href="/">UKSTUDIO</a></div></div><div class="container"><article class="article-content"><h1 class="article--title"><a href="/2012/09/11/validates_presence_of/">validates :foo_id, :presence => trueを追う</a></h1><div class="article--time"><i class="fa fa-calendar"></i><time dateMime="2012-09-11 00:00:00 UTC" pubdate="pubdate">September 11 2012</time></div><div class="article-tags"></div><div class="article-summary">チームメンバーから「validates_presence_of :user_idはそのuser_idが存在するか確かめてくれる」という情報を得て、そんな隠れ仕様あんの?とおもってちょっと調べてみた。

結論だけまず言うと
<pre>
validates :user_id, :presence =&gt; true
validates_presence_of :user_id
</pre>
ではなく、
<pre>
validates :user, :presence =&gt; true
validates_presence_of...</pre></div><div class="read-more"><a href="/2012/09/11/validates_presence_of/">READ MORE</a></div></article><article class="article-content"><h1 class="article--title"><a href="/2012/09/11/ripping_cd_on_gentoo/">GentooでCDをリッピングして聞く</a></h1><div class="article--time"><i class="fa fa-calendar"></i><time dateMime="2012-09-11 00:00:00 UTC" pubdate="pubdate">September 11 2012</time></div><div class="article-tags"></div><div class="article-summary">メモ

CDをwavで一旦取り込んでflacに変換。
<pre>
$ sudo emerge cdrtools
$ sudo emerge flac
$ cdda2wav -H -B
$ find . -name "*.wav" -print0 | xargs -0 flac
</pre>


<pre>
# /etc/security/limits.conf
@audio - rtprio 99
@audio - memlock unlimited
@audio - nice -10
</pre>...</div><div class="read-more"><a href="/2012/09/11/ripping_cd_on_gentoo/">READ MORE</a></div></article><article class="article-content"><h1 class="article--title"><a href="/2012/04/09/tddconf2012/">TDDカンファレンスでLTしてきたのでその補足</a></h1><div class="article--time"><i class="fa fa-calendar"></i><time dateMime="2012-04-09 00:00:00 UTC" pubdate="pubdate">April 09 2012</time></div><div class="article-tags"></div><div class="article-summary">4月の6日の<a href="http://atnd.org/events/26808">TDDカンファレンス</a>に参加&amp;LT発表してきた。参加といっても遅刻していったのでほとんど話を聞けていないのだけれど。

とりあえず資料は<a href="http://ukstudio.github.com/tddconf_20120406/">こちら</a>。読み直してみたら途中の話の飛躍がこれはひどい。当日もかなり短い発表の上に色々内容を省いてしまったので色々と補足しておく。(当日聞いていただいた方に申し訳ないし、あまりこういうのはよくないね。パブリックスピーカー読んででなおします。)

今回の内容の発端は「TDDはテストではない」という言葉の暴力性というか、言い切りに何となく違和感...</div><div class="read-more"><a href="/2012/04/09/tddconf2012/">READ MORE</a></div></article><article class="article-content"><h1 class="article--title"><a href="/2012/04/02/married/">結婚いたしました</a></h1><div class="article--time"><i class="fa fa-calendar"></i><time dateMime="2012-04-02 00:00:00 UTC" pubdate="pubdate">April 02 2012</time></div><div class="article-tags"></div><div class="article-summary">この度4月1日付けで結婚いたしました。

Facebookには届出を出した時点で結婚したことを書いたんですが、たくさんのイイネ!とおめでとうのお言葉ありがとうございます。書類をだしただけで特に何もかわっていないので今だに結婚した自覚がないんですが、そのうち自覚するものなんでしょうか。

今のところ式は予定していないので、近いうちにパーティ的なことはしたいなと考えています。その時は改めて近しい皆様にはご招待させていただきます。

以上、簡単ではありますが結婚のご報告でした。
...</div><div class="read-more"><a href="/2012/04/02/married/">READ MORE</a></div></article><article class="article-content"><h1 class="article--title"><a href="/2012/02/20/study_ruby_at_spicelife/">ruby勉強会@spicelife</a></h1><div class="article--time"><i class="fa fa-calendar"></i><time dateMime="2012-02-20 00:00:00 UTC" pubdate="pubdate">February 20 2012</time></div><div class="article-tags"></div><div class="article-summary"><a href="http://twitter.com/holygrail" target="_blank">@holygrail</a>に何か話してよと頼まれたので適当に話してきた。

<a href="http://ukstudio.github.com/ruby-study-2012-02-17/" target="_blank">資料</a>

なんか当日、話す時に使った資料は古いやつだったみたい。どおりで何か違和感があると思った。

うっかり対象者を<a href="http://www.amazon.co.jp/gp/product/4873113679?ie=UTF8&amp;tag=ukstudio0c-22&amp;linkCode=shr&amp;camp=1207&amp;creative=8411&amp;creativeASIN=4873113679&amp;ref_=sr_1_1&amp;qid=1329744986&amp;sr=8-1" target="_blank">初めてのRuby</a>を読んだ人ぐらいを対象にしてたけど全然そんなことなかった。「define_methodをsendで呼び出すとわかると思うんですけど」「まずはsendがわからないんじゃない?」みたいな。結構早口だったし、資料も大分内容が薄いので大半の人はわからなかったかも。大変申し訳ない。

...</div><div class="read-more"><a href="/2012/02/20/study_ruby_at_spicelife/">READ MORE</a></div></article><article class="article-content"><h1 class="article--title"><a href="/2012/02/20/motivation_benkyo-ka/">勉強会とかで話す時のモチベーション</a></h1><div class="article--time"><i class="fa fa-calendar"></i><time dateMime="2012-02-20 00:00:00 UTC" pubdate="pubdate">February 20 2012</time></div><div class="article-tags"></div><div class="article-summary"><ul>
<li>その勉強会やコミュニティから得たものがあるので、恩返ししたい</li>
<li>主催者もしくは声をかけてくれた人にお世話になったことがあるので恩返ししたい</li>
<li>勉強会の目的・主旨に賛同し、何らかの協力をしたい</li>
<li>たまたま自分が自主的に調べていた・勉強していた話題だった</li>
<li>営業活動になりそう</li>
<li>資料作りの時間を含めた上で、ある程度満足できる謝礼・報酬がでる</li>
</ul>

ぐだぐだ言ったけど、最終的には気分である。
</div><div class="read-more"><a href="/2012/02/20/motivation_benkyo-ka/">READ MORE</a></div></article><article class="article-content"><h1 class="article--title"><a href="/2012/01/11/rails3_primary_key_foreign_key_big_int/">rails3でprimary keyとforeign keyをbig intにする</a></h1><div class="article--time"><i class="fa fa-calendar"></i><time dateMime="2012-01-11 00:00:00 UTC" pubdate="pubdate">January 11 2012</time></div><div class="article-tags"></div><div class="article-summary">以下は、PostgreSQLの例。
<code><pre>ActiveRecord::ConnectionAdapters::PostgreSQLAdapter::NATIVE_DATABASE_TYPES[:primary_key] = 'bigserial primary key' </pre></code>
外部キーの場合、<code>t.references :user</code>とか書いてると、ActiveRecord側でintegerがハードコーディングされているのでlimitオプションを付けるしかなさそう。
<code><pre>t.references :user...</pre></code></div><div class="read-more"><a href="/2012/01/11/rails3_primary_key_foreign_key_big_int/">READ MORE</a></div></article><article class="article-content"><h1 class="article--title"><a href="/2011/10/12/lvm_kvm/">LVMを使っているKVMのディスクイメージの容量を追加する</a></h1><div class="article--time"><i class="fa fa-calendar"></i><time dateMime="2011-10-12 00:00:00 UTC" pubdate="pubdate">October 12 2011</time></div><div class="article-tags"></div><div class="article-summary">KVMのディスクイメージの容量を増やしたのでメモ。

<h2>イメージファイルの拡張</h2>
まずはイメージのフォーマットを確認する。qemu-imgのinfoでわかる。

<pre>$ qemu-img info vm.img</pre>

今回はqcow2になっていたのでrawに変換する。

<pre>$ qemu-img convert -f qcow2 vm.img -O raw vm.raw</pre>

ddのseekを使って末尾に領域を追加する。10GBのイメージに5GB追加するならこんな感じ。

<pre>$ dd if...</pre></div><div class="read-more"><a href="/2011/10/12/lvm_kvm/">READ MORE</a></div></article><article class="article-content"><h1 class="article--title"><a href="/2011/09/29/debut_gentoo/">Gentooデビューしました</a></h1><div class="article--time"><i class="fa fa-calendar"></i><time dateMime="2011-09-29 00:00:00 UTC" pubdate="pubdate">September 29 2011</time></div><div class="article-tags"></div><div class="article-summary">メインの開発マシンのOSをUbuntuからGentooにしました。Gentooにした理由は割となんとなくだけど、強いて言うならGentooいいよっていう人の気持ちを知りたいのと、あとPortageは割と好きだからかな。Ubuntuに不満があったわけでもない。Unityは好きじゃないけど、どうせXMonad使うし。

インストールは<a href="http://atnd.org/events/19056">第2回 Gentoo Linux インストール講習会 : ATND</a>に参加したおかげで起動するまでは割とすんなり(Thanks @ursm, @kenchan)...</div><div class="read-more"><a href="/2011/09/29/debut_gentoo/">READ MORE</a></div></article><article class="article-content"><h1 class="article--title"><a href="/2011/08/25/ipv6hackathon/">IPv6 Hackathonに参加してきた</a></h1><div class="article--time"><i class="fa fa-calendar"></i><time dateMime="2011-08-25 00:00:00 UTC" pubdate="pubdate">August 25 2011</time></div><div class="article-tags"></div><div class="article-summary">この間のLL PlanetsでIPv6 Hackathonとやらに参加してきた。Ruby組は僕と @sugamasao と @takano32 の3人でチーム組んだ。

<h2>RailsはIPv6でも大丈夫っぽい</h2>
大丈夫っぽいっていうのは軽くさわった程度なので断言できるほどでもないため。IPv6でRailsを立ち上げたかったら上記のように--bを指定すれば大丈夫です。

<pre><code>rails server --b="::"  -p 3000</code></pre>

Unicornの場合もオプションで大丈夫。
...</div><div class="read-more"><a href="/2011/08/25/ipv6hackathon/">READ MORE</a></div></article><article class="article-content"><h1 class="article--title"><a href="/2011/08/04/tddbc_tokyo_1_6/">TDDBC 東京 1.6でサポートスタッフをやってきました</a></h1><div class="article--time"><i class="fa fa-calendar"></i><time dateMime="2011-08-04 00:00:00 UTC" pubdate="pubdate">August 04 2011</time></div><div class="article-tags"></div><div class="article-summary"><a href="http://www.zusaar.com/event/agZ6dXNhYXJyDQsSBUV2ZW50GPGlAww">TDD Boot Camp 東京 1.6</a>にRubyのサポートスタッフとして参加してきた。

当初の予定ではあくまでサポートなのでペアプロには参加しない予定だったけど、Rubyのグループが5人で人数が奇数になってしまったので急遽ペアプロに参加することにした。

この辺は@t_wadaさんや主催の@pocketberserkerさんとも相談してペアとトリオのふたつに分けるっていう話もあったけれど、僕が「せっかくだからペアプロして帰ってもらいたい」と思ったので若干の迷いはあれどペアプロに...</div><div class="read-more"><a href="/2011/08/04/tddbc_tokyo_1_6/">READ MORE</a></div></article><article class="article-content"><h1 class="article--title"><a href="/2011/07/02/bdd/">BDDについて自分なりにまとめてみた</a></h1><div class="article--time"><i class="fa fa-calendar"></i><time dateMime="2011-07-02 00:00:00 UTC" pubdate="pubdate">July 02 2011</time></div><div class="article-tags"><ul><li><i class="fa fa-tag"></i><a href="/tags/rspec/">rspec</a></li><li><i class="fa fa-tag"></i><a href="/tags/testing/">testing</a></li></ul></div><div class="article-summary"><p>BDDという言葉も割と人によって指すものが違うようなので「俺の中でのBDDはこうだよ」って内容のエントリ。別に絶対的なものでもないと思うので参考までに</p>

<h2 id="結論から">結論から</h2>

<p>とりあえず結論だけ知りたい人向けに。</p>

<ul>
<li>BDDにはふたつの種類がある</li>
<li>1. TDDの言い換えのBDD(開発寄り)</li>
<li>2. ATDD(受け入れテスト)でのBDD(ユーザ寄り)</li>
</ul>

<h2 id="振る舞い">振る舞い</h2>

<p>BDDは振る舞い駆動開発と言われたりするように、テストという言葉のかわりに<strong>振る舞い</strong>という言葉を使う。日本語的には仕様と言うほうがわかりやす...</p></div><div class="read-more"><a href="/2011/07/02/bdd/">READ MORE</a></div></article><article class="article-content"><h1 class="article--title"><a href="/2011/05/14/mongodb_nodejs/">mongodb + node.js を軽く試した</a></h1><div class="article--time"><i class="fa fa-calendar"></i><time dateMime="2011-05-14 00:00:00 UTC" pubdate="pubdate">May 14 2011</time></div><div class="article-tags"></div><div class="article-summary"><h2>mongodbのインストール</h2>
<pre class="sunlight-hilight-bash">$ sudo aptitude install mongodb
$ mkdir /path/to/data
$ mongod --dbpath /path/to/data</pre>

<h2>mongooseのインストール</h2>
<pre>$ npm install -g mongoose</pre>
node.jsでmongodb扱うのに他にもライブラリあるみたいだけど、とりあえずnpmでサクッと使えるmongooseを使ってみる。
<h2>サンプル</h2>
軽く試しただけなので、詳細は <a href="https://github.com/LearnBoost/mongoose">LearnBoost...</a></div><div class="read-more"><a href="/2011/05/14/mongodb_nodejs/">READ MORE</a></div></article><article class="article-content"><h1 class="article--title"><a href="/2011/05/10/duostack_nodejs/">duostackでnode.jsアプリを動かすまで</a></h1><div class="article--time"><i class="fa fa-calendar"></i><time dateMime="2011-05-10 00:00:00 UTC" pubdate="pubdate">May 10 2011</time></div><div class="article-tags"></div><div class="article-summary"><h2>node.jsのインストール</h2>
何はともあれnode.jsのインストール。aptではなくgithubからリポジトリをcloneしてmakeした。最近はapt以外のものは$HOME/localに入れるルールでやってるのでnode.jsも同様に。node.jsをsudoで入れると結構ハマるみたいな話を聞くので特に理由がなければaptとかで入れるか$HOME以下に入れるのがよさそう。

<pre>$ git clone git://github.com/joyent/node.git
$ cd node...</pre></div><div class="read-more"><a href="/2011/05/10/duostack_nodejs/">READ MORE</a></div></article><article class="article-content"><h1 class="article--title"><a href="/2011/05/09/build_vim/">Vimをソースからビルド</a></h1><div class="article--time"><i class="fa fa-calendar"></i><time dateMime="2011-05-09 00:00:00 UTC" pubdate="pubdate">May 09 2011</time></div><div class="article-tags"></div><div class="article-summary">aptで入れたvimのrubyインターフェースのバージョンが1.8.6なのが気にいらなくてvimをソースからビルドした。

<pre><code>$ hg clone https://vim.googlecode.com/hg/ vim
$ hg update vim73

$ cd vim
$ ./configure --enable-multibyte --prefix=$HOME/local --enable-rubyinterp</code></pre>

これでOK。aptで入れたvimも一応残しておきたかった...</div><div class="read-more"><a href="/2011/05/09/build_vim/">READ MORE</a></div></article><article class="article-content"><h1 class="article--title"><a href="/2011/04/19/coffeescript-qunit/">CoffeeScript + QUnitでTDD環境作ったよ</a></h1><div class="article--time"><i class="fa fa-calendar"></i><time dateMime="2011-04-19 00:00:00 UTC" pubdate="pubdate">April 19 2011</time></div><div class="article-tags"></div><div class="article-summary">Rails3.1からCoffeeScriptがデフォルトで入ってるとかなんとかで、とりあえずCoffeeScriptだけで少し触ってみた。とりあえずQUnit自体もCoffeeScriptで書けるようなTDD環境を作ってみた。

とりあえず、UbuntuにCoffeeScriptをインストールするわけだけどaptの方が古いしせっかくだから最新のを触るかと思ったのでgithubからCoffeeScriptとnode.jsのリポジトリをcloneしてインストール。

<pre>$ git clone...</pre></div><div class="read-more"><a href="/2011/04/19/coffeescript-qunit/">READ MORE</a></div></article><article class="article-content"><h1 class="article--title"><a href="/2011/04/11/odrk01/">大江戸Ruby会議01で発表してきました</a></h1><div class="article--time"><i class="fa fa-calendar"></i><time dateMime="2011-04-11 00:00:00 UTC" pubdate="pubdate">April 11 2011</time></div><div class="article-tags"></div><div class="article-summary">昨日は大江戸Ruby会議という名のasakusa.rbの生活発表会があったので、普段の生活で考えてることを発表してきた。ちなみに実はasakusa.rbの参加回数はそんなに多くなかったりする。当日のスライドと動画はこちら。KaigiFreaksは仕事がはやくてすごい。いつもありがとうございます!



<a href="http://vimeo.com/channels/oedorubykaigi01">大江戸Ruby会議01 on Vimeo</a>

この発表について何か僕にもの申したい人がいたら@ukstudioかy.akamatsu[at]ukstudio.jpまで頂けるとありが...</div><div class="read-more"><a href="/2011/04/11/odrk01/">READ MORE</a></div></article><article class="article-content"><h1 class="article--title"><a href="/2011/03/24/activity/">近況</a></h1><div class="article--time"><i class="fa fa-calendar"></i><time dateMime="2011-03-24 00:00:00 UTC" pubdate="pubdate">March 24 2011</time></div><div class="article-tags"></div><div class="article-summary"><h3>個人事業主になりました</h3>
<a href="http://ukstudio.jp/wp-content/uploads/2011/03/FxCam_1300951372227.jpg"><img src="http://ukstudio.jp/wp-content/uploads/2011/03/FxCam_1300951372227.jpg" alt="" title="FxCam_1300951372227" width="720" height="480" class="alignnone size-full wp-image-824"></a>
この間の確定申告の際に、個人事業主届けを出してきた。去年は出さずに1年働いていたけど、今年は確定申告を青にしたのでそのついでに。届出の提出はすごいあっけなくて、改めて個人事業主なんてそんな大層なものじゃないなーと思った。

屋号は「UKSTUDIO」にした。屋号を取ったから何が変わるってわけでもないけど、本名とukstudioっていうIDの間にある溝を埋めるぐらいの意味はあるかな。

<h3>4月下旬からスケールアウトでお仕事</h3>
<a href="http://twitter.com/yamaz">@yamaz</a>さんからお声がかか...</div><div class="read-more"><a href="/2011/03/24/activity/">READ MORE</a></div></article><article class="article-content"><h1 class="article--title"><a href="/2011/03/21/tddbc-fukuoka/">TDDBC福岡に参加してきた</a></h1><div class="article--time"><i class="fa fa-calendar"></i><time dateMime="2011-03-21 00:00:00 UTC" pubdate="pubdate">March 21 2011</time></div><div class="article-tags"></div><div class="article-summary"><a href="http://ukstudio.jp/wp-content/uploads/2011/03/2011-03-19-09.24.06.jpg"><img src="http://ukstudio.jp/wp-content/uploads/2011/03/2011-03-19-09.24.06.jpg" alt="" title="博多駅" class="alignnone size-full wp-image-815" style="width: 100%;"></a>

福岡TDDBCに参加してきた。今回で3回目の参加(1回目は東京、2回目は東北)。

3回は割と多めの参加回数だと思うけど、参加者層が地域によって違ったり、当然ペアプロする相手も違うわけでいつも違う刺激をもらってる。

今回は@mzpさんが参加するとのことなので普段使ってるRubyではなくOCamlで参加。OCaml組は2ペア(4人)いて、1日目の前半を@suerさん、1日目の後半と2日目を@mzpさんとペアを組んでやった。OCamlは初心者もいいところなので2人には大分お世...</div><div class="read-more"><a href="/2011/03/21/tddbc-fukuoka/">READ MORE</a></div></article><article class="article-content"><h1 class="article--title"><a href="/2011/01/23/bought_galaxy_tab/">Galaxy Tabを購入した</a></h1><div class="article--time"><i class="fa fa-calendar"></i><time dateMime="2011-01-23 00:00:00 UTC" pubdate="pubdate">January 23 2011</time></div><div class="article-tags"></div><div class="article-summary">HT-03AからGalaxy Tabに機種変した。と言っても電話はこれしか持っておらず、さすがにGalaxy Tabで通話するのは不便なので機種変した後SIMを抜いてHT-03Aに戻した。Galaxy TabはWi-Fiメインで使う予定。今のところ外でGalaxy Tabからネットに繋ぐことはあまり考えてない。とは言え繋げるにこしたことはないので、今持っているイーモバをPocketWiFiにするか、b-mobileを契約するかぐらいのことは検討している。

<h2>Galaxy Tabを購入し...</h2></div><div class="read-more"><a href="/2011/01/23/bought_galaxy_tab/">READ MORE</a></div></article><div class="pager"><ul><li class="previous"><a href="/">Prev</a></li><li class="next"><a href="/page/3/">Next</a></li></ul></div></div></body></html>