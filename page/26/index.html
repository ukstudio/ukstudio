<!DOCTYPE html><html><head><meta charset="utf-8" /><!--Always force latest IE rendering engine or request Chrome Frame--><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><!--Use title if it's in the page YAML frontmatter--><title>ukstudio.jp</title><link href="http://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet" type="text/css" /><link href="/stylesheets/normalize.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/all.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/highlight.css" media="screen" rel="stylesheet" type="text/css" /><script src="/javascripts/all.js" type="text/javascript"></script><link href="/feed.xml" rel="alternate" title="atom" type="application/atom+xml" /><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-12755601-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body class="page page_26 page_26_index"><div class="cointainer-fluid"><div class="navbar navbar-default" role="navigation"><div class="container-fluid"><div class="navbar-header"><a class="navbar-brand" href="/">UKSTUDIO</a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li><a href="http://twitter.com/ukstudio">Twitter</a></li><li><a href="http://github.com/ukstudio">GitHub</a></li></ul></div></div></div></div><div class="container"><article><h1><a href="/2008/10/06/vimm3/">2008-10-06 VimM#3開催のお知らせ</a></h1><hr /><div class="article-body">11月の22日(土)の14時からVimM#3を開催します。

今回のテーマは「脱初心者」ということでなるべくなら初心者の方に来てもらいたいなと思っています。なんかメンバーみると結構「おまえ初心者じゃないだろう!」て人がいるので、負けずに初心者の方もいっぱい来てください。

スピーカーもまだ募集しているので応募お待ちしております。

今回の会場もささださんとほしさんにご協力頂きました。二回連続にわたりありがとうございます。

<a href="http://wiki.livedoor.jp/biowithit/d/VimM%233">VimM#3</a>
</div></article><article><h1><a href="/2008/10/04/rails_many_db/">2008-10-04 RailsでMySQLとPostgreSQLを同時に扱う方法(+問題点)</a></h1><hr /><div class="article-body">プラグインとか無しで、複数のDB(MySQLとPostgreSQL)を扱う方法。Rails2.1でしか試してないけど、多分1.2とかでも大丈夫。多分。MySQLとPostgreSQLの接続ライブラリはgemからインストールしておくこと。

まずは、database.ymlに扱うデータベースの定義を書く。

<pre lang="ruby">
development:
  adapter: mysql
  encoding: utf8
  database: db_development
  username: root
  password:

test:
(面倒だから略)

production:
(面倒だから略)

psql_development:
  adapter: postgres
  encoding: utf8
  database: ma2_mcd
  username: root
  password:

psql_test:
(面倒だから略)

psql_production:
(面倒だから略)

</pre>

次にPostgreSQLに接続させたいモデルを編集する。例えば、ProfileモデルはPostgreSQLの方に接続させたい場合は以下のようになる。

<pre lang="ruby">
class Profile < ActiveRecord::Base
  establish_connection("psql_#{RAILS_ENV}".to_sym)
end
</pre>

establish_connectionにシンボルでdatabase.ymlの定義を渡せば、そのモデルはその定義のデータベースに接続する。本番、テスト、開発でそれぞれ定義が違うだろうから、RAILS_ENVで今起動している環境の定義を呼び出すようにしてやる。

<h2>追記</h2>
上記の設定で一応アプリは動作するけど、いくつか問題点があるのでそれをメモしておく。

<h3>マイグレーションの使い分けはどうする</h3>
例えば、db/migrateにcreate_hoge_for_psql.rb(数値は略)とcreate_foo_for_mysql.rbと合った場合、それをどう実行するかが問題になってくる。

普通にrake db:migrateやrake db:migrate RAILS_ENV=psql_developmentとやったら、hogeとfooが両方とも作られてしまう。こちらとして望んでるのは、hogeがPostgreSQLのみ、fooがMySQLのみにできて欲しい。

うーむ、弱った。
</div></article><article><h1><a href="/2008/09/19/no_use_number_prime/">2008-09-19 数字を使わずに素数判定</a></h1><hr /><div class="article-body">86のSkypeチャットで話題になったのでちょこちょこっと書いた。普通にループして比較するだけお。もっといい方法あるんだろうけど、とりあえずはよしとする。

<pre lang="ruby">
class Integer
  def prime?
    return false if self.zero? || self == [[]].size
    ([[],[]].size...self).each do |i|
      return false if (self%i).zero?
    end
    true
  end
end
</pre>

suztomoのやつ。
<a href="http://d.hatena.ne.jp/suztomo/20080918/1221746629">http://d.hatena.ne.jp/suztomo/20080918/1221746629</a>
</div></article><article><h1><a href="/2008/09/18/firefox/">2008-09-18 MacでFirefoxのプロファイルの使い分けと別バージョンの同時起動をする</a></h1><hr /><div class="article-body">Firefoxのプロファイルの使い分け(普段用/開発用)と別バージョン(2.0と3.1)の同時起動がしたかったのでちょっと設定してみた。

<h2>プロファイルの作成</h2>
まずは使い分けるためのプロファイルを作成する。今回作成したのは以下の3つ。
<ul>
<li>Firefox3.1</li>
<li>Firefox3.1_development</li>
<li>Firefox2.0</li>
</ul>

プロファイルの作成の仕方はTerminalから-Pオプションを付けて、Firefoxを起動させればいい。

<pre lang="bash">
$ /Applications/Firefox.app/Contents/MacOS/firefox -P
</pre>

プロファイルマネージャーが開くのでそこで「新しいプロファイルを作成」を選び、わかりやすいように名前をつける。

<h2>起動コマンドの作成</h2>
プロファイルを指定して起動させるには-P "プロファイル名"のオプションを付ける必要がある。毎回Terminalで指定して起動させるのも手間なので、起動コマンド用に3つ程ファイルを作成する。(後でapp化する)

ちなみにこんなことしなくても、複数のプロファイルがあれば起動時に使用するプロファイルを聞かれるので必要ない人は別にしなくても大丈夫。

<h3>Firefox3.1普段用</h3>
<pre lang="shell">
#!/bin/sh

/Applications/Shiretoko.app/Contents/MacOS/firefox -P Firefox3.1 &
exit 0
</pre>

<h3>Firefox3.1開発用</h3>
<pre lang="shell">
#!/bin/sh

/Applications/Shiretoko.app/Contents/MacOS/firefox -P Firefox3.1_development &
exit 0
</pre>

<h3>Firefox2.0</h3>
<pre lang="shell">
#!/bin/sh

/Applications/Firefox.app/Contents/MacOS/firefox -P Firefox2.0 -no-remote &
exit 0
</pre>

Firefox2.0のにだけ、-no-remoteオプションが付いているのは、同時起動を想定している為。別のバージョンを同時に起動する場合は、大抵は最初に起動しておく方は-no-remoteオプションは無し、後から起動する方に-no-remoteオプションを付けるようにしておけばいい。
<h2>app化</h2>
起動コマンドを作ったところで、せっかくなのでそれをapp化する。

app化に関しては<a href="http://www.pqrs.org/tekezo/macosx/doc/makeapp/">[Mac OS X] シェルスクリプトとかの CUI アプリケーションを Mac OS X 方式の .app にする方法 [簡単 5 ステップ]</a>を参照。

上記エントリのcore.shの部分をさっき作った起動コマンドスクリプトに置き換えればOK。Firefoxのアイコンは/Applications/Firefox.app/Contents/Resources/firefox.icnsを使用。Shiretokoのアイコンを使いたければ、/Applications/Shiretoko.app/(ry から取ってくればいい。

あとはapp化したのを直接クリックするなり、QuickSilverから呼びだすようにしておけばいい。

<table  border="0" cellpadding="5"><tr><td colspan="2"><a href="http://www.amazon.co.jp/Firefox-Hacks-Mozilla%E3%83%86%E3%82%AF%E3%83%8E%E3%83%AD%E3%82%B8%E5%BE%B9%E5%BA%95%E6%B4%BB%E7%94%A8%E3%83%86%E3%82%AF%E3%83%8B%E3%83%83%E3%82%AF-%E6%B1%9F%E6%9D%91-%E7%A7%80%E4%B9%8B/dp/487311375X%3FSubscriptionId%3D0G91FPYVW6ZGWBH4Y9G2%26tag%3D2004-05-22%26linkCode%3Dxm2%26camp%3D2025%26creative%3D165953%26creativeASIN%3D487311375X" target="_blank">Firefox 3 Hacks Mozillaテクノロジ徹底活用テクニック</a><img src='http://www.assoc-amazon.jp/e/ir?t=2004-05-22&l=ur2&o=9' width='1' height='1' border='0' alt='' /></td></tr><tr><td valign="top"><a href="http://www.amazon.co.jp/Firefox-Hacks-Mozilla%E3%83%86%E3%82%AF%E3%83%8E%E3%83%AD%E3%82%B8%E5%BE%B9%E5%BA%95%E6%B4%BB%E7%94%A8%E3%83%86%E3%82%AF%E3%83%8B%E3%83%83%E3%82%AF-%E6%B1%9F%E6%9D%91-%E7%A7%80%E4%B9%8B/dp/487311375X%3FSubscriptionId%3D0G91FPYVW6ZGWBH4Y9G2%26tag%3D2004-05-22%26linkCode%3Dxm2%26camp%3D2025%26creative%3D165953%26creativeASIN%3D487311375X" target="_blank"><img src="http://ecx.images-amazon.com/images/I/41664CPo6pL._SL160_.jpg" border="0" alt="Firefox 3 Hacks Mozillaテクノロジ徹底活用テクニック" /></a></td><td valign="top"><font size="-1">江村 秀之<br /><br />オライリージャパン  2008-08-27<br />売り上げランキング : 11045<br /><br /><br /><a href="http://www.amazon.co.jp/Firefox-Hacks-Mozilla%E3%83%86%E3%82%AF%E3%83%8E%E3%83%AD%E3%82%B8%E5%BE%B9%E5%BA%95%E6%B4%BB%E7%94%A8%E3%83%86%E3%82%AF%E3%83%8B%E3%83%83%E3%82%AF-%E6%B1%9F%E6%9D%91-%E7%A7%80%E4%B9%8B/dp/487311375X%3FSubscriptionId%3D0G91FPYVW6ZGWBH4Y9G2%26tag%3D2004-05-22%26linkCode%3Dxm2%26camp%3D2025%26creative%3D165953%26creativeASIN%3D487311375X" target="_blank">Amazonで詳しく見る</a></font><font size="-2"> by <a href="http://www.goodpic.com/mt/aws/index.html" >G-Tools</a></font></td></tr></table>
</div></article><article><h1><a href="/2008/09/18/firefox_addon/">2008-09-18 Firefoxの拡張の整理</a></h1><hr /><div class="article-body">1つ前の記事でプロファイルの使い分けの設定をしたけど、整理もかねて~/Library/Application Support/Firefoxを削除して、1から構築しなおした。

<h2>拡張のインストール</h2>
<h3>開発/普段共通</h3>
<dl>
<dt>Nightly Tester Tools</dt>
<dd>今、メインに使っているのがShiretoko(Firefox3.1α2)なので、これを入れないと動かない拡張が多い</dd>
<dt>Vimperator</dt>
<dd>Firefoxをvimみたいに操作。もうこいつがないと生きていけない体になってしまった。</dd>
<dt>XUL/Migemo</dt>
<dd>Vimpでmigemo_hint.jsを使うために。</dd>
<dt>GreaseMonkey</dt>
<dd>あんまりグリモンは使っていなくてAutopagerizeぐらいかな。でも必須。</dd>
</dl>

<h3>開発</h3>
<dl>
<dt>Web Developer</dt>
<dd>HTMLやCSSいじったりするときに。ブロック要素の枠表示が一番使用率高いかも。</dd>
<dt>Firebug</dt>
<dd>JavaScriptを書くときに。Inspect Element(日本語だと要素を表示とかだっけ?)が地味に便利。</dd>
<dt>Live HTTP Headers<dt>
<dd>ブラウザがどんなリクエストを送って、どんなレスポンスを受けとってるか調べるときに。HTTPステータスとか。</dd>
<dt>HTML Validator</dt>
<dd>名前のとおり。タグの閉じ忘れとかもわかる。</dd>
<dt>SQLite Manager</dt>
<dd>RailsでたまにSQLiteを使うのでその時に。</dd>
<dt>SeleniumIDE</dt>
<dd>Seleniumのテストケースを作る時に。ブラウザが勝手に動くのはおもしろい。</dd>
<dt>RestTest</dt>
<dd>RESTアプリのテストに。GET/POST/PUT/DELETEのヘッダを偽装。</dd>
</dl>

大体こんな感じか。普段は基本的に閲覧しかしないので、vimpとグリモンがあればOK。他の拡張はほとんど開発のときにしか使わないので、必要なときだけ読み込めばいい。

vimpのプラグインと設定ファイルに関しては、<a href="http://github.com/ukstudio/config/tree/master">githubに置いてある</a>ので、それをもってくるだけ。

とりあえずこんなもんかなー。
</div></article><div class="pager"><ul><li class="previous"><a href="/page/25/">Prev</a></li><li class="next"><a href="/page/27/">Next</a></li></ul></div></div></body></html>