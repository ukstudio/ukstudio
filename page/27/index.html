<!DOCTYPE html><html><head><meta charset="utf-8" /><!--Always force latest IE rendering engine or request Chrome Frame--><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><!--Use title if it's in the page YAML frontmatter--><title>ukstudio.jp</title><link href="http://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet" type="text/css" /><link href="/stylesheets/normalize.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/all.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/highlight.css" media="screen" rel="stylesheet" type="text/css" /><script src="/javascripts/all.js" type="text/javascript"></script><link href="/feed.xml" rel="alternate" title="atom" type="application/atom+xml" /><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-12755601-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body class="page page_27 page_27_index"><div class="cointainer-fluid"><div class="navbar navbar-default" role="navigation"><div class="container-fluid"><div class="navbar-header"><a class="navbar-brand" href="/">UKSTUDIO</a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li><a href="http://twitter.com/ukstudio">Twitter</a></li><li><a href="http://github.com/ukstudio">GitHub</a></li></ul></div></div></div></div><div class="container"><article><h1><a href="/2008/09/09/firefox3_1/">2008-09-09 Firefoxα2とβ1preを試してみた</a></h1><hr /><div class="article-body">いつのまにかFirefoxのα2とβ1preがリリースされてたので試してみた。個人的にVimpとかグリモンがないとどうにもならない体になってしまったので<a href="https://addons.mozilla.org/ja/firefox/addon/6543">Nightly Tester Tools</a>をインストール。これで3.01で動いていた拡張は大体動く模様。

それとTraceMonkeyを使えるようにするためabout:configを開いて、「jit」で検索。2項目ほどヒットするので、それぞれの値をfalseからtrueに変更する。これでTraceMonkeyはONになるみたい。

使ってみた感想をざっと過剰書きであげてみると

<ul>
<li>レンダリングが結構向上しているのが体感でわかる。</li>
<li>Mac版FirefoxのFLAHの日本語入力問題が解決してるっぽい。</li>
<li>β1preでLDRを開いたらちゃんと表示されなかった。α2は大丈夫。</li>
<li>Ctrl+Tabがかっこいい。でもvimp使ってると関係ない話。</li>
</ul>

ざっとこんな感じ。レンダリングの向上がかなりうれしい。今のところβの方でLDRが表示できなかったこと以外特に問題は起きていない。まぁLDRが見れないのは致命的なのでとりあえずα2の方を使っていこうと思う。

TraceMonkeyに関しては、オン、オフそれぞれ試したけど普通に使っている分には違いがわからなかった。オフでも十分はやくなっている。ベンチマークをとったらもしかしたら違うのかもしれないけど。

なんにせよ、個人的には今回のα2とβ1preには非常に満足しているので、正式リリースが楽しみになってきた。

<a href="http://developer.mozilla.org/devnews/index.php/2008/09/05/firefox-31-alpha-2-now-available-for-download/">Mozilla開発者向け公式ブログの記事</a>
<a href="ftp://ftp.mozilla.org/pub/firefox/nightly/latest-trunk/">Firefox3.1β1pre</a>
<a href="https://wiki.mozilla.org/JavaScript:TraceMonkey#Playing_with_TraceMonkey">TraceMonkeyの有効化</a>
</div></article><article><h1><a href="/2008/09/07/vimm_railsvim/">2008-09-07 VimM#2でRails.vimについて話してきました</a></h1><hr /><div class="article-body"><a href="http://wiki.livedoor.jp/biowithit/d/VimM%232">VimM#2</a>

とりあえず資料。正直、これだけ見てもさっぱりな資料だとは思いますがw


Vimの人達の集りでRails.vimというRails使う人限定のプラグインの話はどうなんだろーとか思っていたけど、結構Rails使ってる人いたみたいでよかった。

発表内容自体はかなりgdgdというか、伝えたいことをうまく伝えられなかったなーと言った感じ。やっぱり事前に練習しとくべき。あとは慣れかなー。しばらくは積極的に発表する側で頑張りたい。

それと、RSpecの具体的な対応については<a href="http://ukstudio.jp/2008/06/05/rails_vim_rspec/">rails.vimのファイル切り替えをRSpecに対応させる(仮)</a>を参照。

それにしても、エディタ1つで4時間(懇親会含めるともっとある)発表があって、それに40人集まるってのもすごい話だ。

あと、VimMのMはみみのMらしいです。VimM#2はmickey24がうさみみをつけて主催するそうです。期待。
</div></article><article><h1><a href="/2008/08/31/web_design_questionnaire/">2008-08-31 wuたんのWebデザインに関するアンケートにご協力を。</a></h1><hr /><div class="article-body"><strong>結果が公開されています</strong>
<a href="http://3ping.org/2008/08/31/0120">Webデザインに関するアンケート結果</a>
<hr />

<a href="http://3ping.org/2008/08/31/0120">Web デザインに関するアンケートにご協力ください - 3ping.org</a>

このブログはWebデザイナよりは、プログラマ、エンジニアと言った方が多いと思うのですが、よろしかったらご協力お願いします。以下のフォームからでも回答可能です。結果は公開してもらえるようです。よろしくお願いします。

<div style="margin: 1em 20px; border: 7px solid #eee; padding: 20px;"><iframe src="http://spreadsheets.google.com/embeddedform?key=pqZ008056mIlxmXskWwiMbg" width="310" height="1319" frameborder="0" marginheight="0" marginwidth="0">読込中...</iframe></div>
</div></article><article><h1><a href="/2008/08/25/selenium_on_rspec/">2008-08-25 Selenium on Rspecを軽く試してみた</a></h1><hr /><div class="article-body">とりあえずはScaffoldで簡単なアプリを作って、そのテストケースを作成、実行してみるところまで。そんな難しいことはしない。Railsは2.0.2を使用。2.1だとSeleniumにパッチを当てなきゃいけないので面倒。2.1の人は<a href="http://clearspace.openqa.org/docs/DOC-1072">Selenium on Rails patch for RoR 2.1</a>からパッチをあててください。

<h3>準備</h3>
まずは準備としてプラグインのインストールと、Scaffoldで簡単なアプリを作成する。
<pre lang="ruby">
$ rails _2.0.2_ blog
$ cd blog
$ ruby script/plugin install http://svn.openqa.org/svn/selenium-on-rails/selenium-on-rails
$ ruby script/generate scaffold entry title:string description:text
$ rake db:migrate
</pre>

ここまでできたらtest環境でサーバーを起動し、seleniumがちゃんと起動するか確認する。
<pre lang="ruby">
$ ruby script/server -e test
</pre>

そうすると下記エラーがでるが、sessionをデータベースであつかうように変更するととりあえず回避できる。原因はよくわかんない。
<blockquote>
CGI::Session::CookieStore::TamperedWithCookie in SeleniumController#support_file
</blockquote>

sessionをデータベースで扱うようにするにはconfig/environment.rbの47行目のコメントアウトをはずし、migrateする。
<pre lang="ruby">
config.action_controller.session_store = :active_record_store
</pre>

<pre lang="bash">
$ rake db:sessions:create
$ rake db:migrate
$ rake db:test:prepare
$ ruby script/server -e test
</pre>

ブラウザでhttp://localhost:3000/selenium/を表示して以下のような画面になればOK。

[caption id="attachment_171" align="alignnone" width="300" caption="Selenium初期画面"]<a href="http://ukstudio.jp/wp-content/uploads/2008/08/init-selenium.jpg"><img src="http://ukstudio.jp/wp-content/uploads/2008/08/init-selenium.jpg" alt="Selenium初期画面" title="Selenium初期画面" width="300" height="240" class="size-medium wp-image-171" /></a>[/caption]

<h3>テストケースの作成</h3>
次にテストケースを作成する。SeleniumはテストケースをHTMLで書くので手書きでも書けるけど、面倒なのでFirefoxのaddonの1つ、<a href="https://addons.mozilla.org/ja/firefox/addon/2079">Selenium IDE</a>を使用する。

Selenium IDEを使用すると、自分の操作を記録しそのままテストケースに変換できるので非常にラク。Selenium IDEを開き、右上の赤いボタンを押すと操作の記録が始まる。あとはテストしたい操作を手動で行なえばいい。

[caption id="attachment_177" align="aligncenter" width="242" caption="Selenium IDE"]<a href="http://ukstudio.jp/wp-content/uploads/2008/08/selenium-ide.jpg"><img src="http://ukstudio.jp/wp-content/uploads/2008/08/selenium-ide.jpg" alt="Selenium IDE" title="Selenium IDE" width="242" height="300" class="size-medium wp-image-177" /></a>[/caption]

今回のテストは「/entriesにアクセスし、そこから/entries/newに移動、タイトルと詳細を入力・保存し、/entries/showでタイトルが実際に表示されている」という内容にした。基本的には記録ボタンを押し、そのまま普通に入力していけばいい。最期の「タイトルが実際に表示されている」というものに関しては文言を範囲選択し、右クリックしverifyTextPresentを選択すればいい。

[caption id="attachment_180" align="aligncenter" width="251" caption="verityTextPresent"]<a href="http://ukstudio.jp/wp-content/uploads/2008/08/selenium-ide-veritytextpresent1.jpg"><img src="http://ukstudio.jp/wp-content/uploads/2008/08/selenium-ide-veritytextpresent1.jpg" alt="verityTextPresent" title="verityTextPresent" width="251" height="300" class="size-medium wp-image-180" /></a>[/caption]

ここまでできたらもう一度赤いボタンを押し、操作の記録を終了させる。最期に今の操作をテストケースとして出力させればいい。

出力方法はIDEのウィンドウにフォーカスを合わせて、ファイル > テストケースに名前をつけて保存。ここではファイル名はadd_entryとしといた。本来なら命名規約的なものもあった方がいいかもしれないけどここでは気にしないことにする。保存先はseleniumに読み込ませるため、RAILS_ROOT/test/selenium/以下に保存。

以上でテストケースの作成は完了。

<h3>テストの実行</h3>
もう一度http://localhost:3000/selenium/を開くと、今つくったテストケースが読み込まれているはず。あとはそのテストを右側のSelenium TestRunnerから実行すると、ブラウザがガチャガチャ動いてテストケースを実行してくれる。

今回はさっきのテストケースを作ってから何も変更を加えていないので、オールグリーンになるはず。

<h3>まとめ</h3>
かなり単純なケースだけど、大体テストケースの作成から実行までを試してみた。まぁとりあえず導入してみるには丁度いいレベルかなと。Selenium IDEを使用すればプログラマ/エンジニアじゃなくてもテスト書けそうだし。

あとは確かSelenium on Railsの機能にfixturesのロード機能とかあった気がするので、その辺りも調べていきたいと思う。
</div></article><article><h1><a href="/2008/08/13/ruby_on_rails_partial/">2008-08-13 Railsのpartialの使い方</a></h1><hr /><div class="article-body">あまりpartialをちゃんと使いこなせていない気がするので(いつもインスタンス変数で適当に値わたしてる)使い方をちょっとメモ。

<pre lang="ruby">
render :partial => 'entry'
</pre>

一番基本となるpartialの使い方。_entry.html.erbを描画。

<pre lang="ruby">
render :partial => 'entry', :locals => {:title => "タイトル"}
</pre>

localsでpartial側に値を渡す。partial側ではローカル変数titleで文字列"タイトル"を参照できる。

<pre lang="ruby">
render :partial => 'entry', :object => @object
render :partial => @entry # インスタンス変数で単数形
</pre>

objectでpartial側に値を渡す。@objectの内容をpartial側でローカル変数entryで参照できる。

<pre lang="ruby">
render :partial => 'entry', :collection => @objects
render :partial => @entries # インスタンス変数で複数形
</pre>

collectionで値を渡す。@objectsの値を1つずつ、partial側でentryとして参照できる。もちろん描画は@objects分繰り返される。
</div></article><div class="pager"><ul><li class="previous"><a href="/page/26/">Prev</a></li><li class="next"><a href="/page/28/">Next</a></li></ul></div></div></body></html>