<!DOCTYPE html><html><head><meta charset="utf-8" /><!--Always force latest IE rendering engine or request Chrome Frame--><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><!--Use title if it's in the page YAML frontmatter--><title>ukstudio.jp</title><link href="http://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet" type="text/css" /><link href="/stylesheets/normalize.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/all.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/highlight.css" media="screen" rel="stylesheet" type="text/css" /><script src="/javascripts/all.js" type="text/javascript"></script><link href="/feed.xml" rel="alternate" title="atom" type="application/atom+xml" /><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-12755601-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body class="page page_24 page_24_index"><div class="cointainer-fluid"><div class="navbar navbar-default" role="navigation"><div class="container-fluid"><div class="navbar-header"><a class="navbar-brand" href="/">UKSTUDIO</a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li><a href="http://twitter.com/ukstudio">Twitter</a></li><li><a href="http://github.com/ukstudio">GitHub</a></li></ul></div></div></div></div><div class="container"><article><h1><a href="/2008/12/18/vimrc_reading/">2008-12-18 第1回vimrc読書会が開催されるそうです。</a></h1><hr /><div class="article-body"><a href="http://vim.g.hatena.ne.jp/ka-nacht/20081218/1229529163">第1回vimrc読書会開催のお知らせ</a>

だそうです。おもしろそうだなー、参加したいなーとか思ってたら

<blockquote>
肴rc
    id:ukstudioのvimrc
</blockquote>

おれのだ!

当日はtwitterの関西忘年会の二次会真っ最中な気がするけど、イーモバイルで繋げられそうだったら繋げよう。
</div></article><article><h1><a href="/2008/12/08/action-coding/">2008-12-08 JRubyとProcessing1.1でaction-coding!</a></h1><hr /><div class="article-body">せっかくProcessingも正式版になったことだし、少しaction-codingで遊んでみる。

まずはJRubyをインストール。面倒なのでバイナリで。環境はMac OSX 10.5.5。

<a href="http://dist.codehaus.org/jruby/">http://dist.codehaus.org/jruby/</a>からjruby-bin-1.1.5.tar.gz(バージョンは適宜読み替え)をダウンロード。現時点では1.1.5をインストールしておけば大丈夫だろう。解凍したら適当な位置に移動。

<pre lang="bash">
$ tar zxvf jruby-bin-1.1.5.tar.gz
$ sudo mv jruby-bin1.1.5 /usr/local/bin
</pre>

次にパスを通す。

<pre lang="zsh">
export JRUBY_HOME=/usr/local/bin/jruby-1.1.5
export PATH=/opt/local/ghc/bin:/opt/local/bin:/opt/local/sbin:/usr/local/bin:$JRUBY_HOME/bin:$PATH
</pre>

PATHは環境によって違うと思うので適当に読み替え。sourceで読み込ませてjrubyコマンドが使えればOK。

<pre lang="bash">
$ source ~/.zshrc
$ jruby -v
jruby 1.1.5 (ruby 1.8.6 patchlevel 114) (2008-11-03 rev 7996) [i386-java]
</pre>

次にaction-codingをインストールする。基本的には<a href="http://code.google.com/p/action-coding/wiki/Tutorial">チュートリアル</a>に従っておけばいい。一点だけProcessing1.0からファイルの位置が変っているので以下の作業がいる。Processingのパスは普通にインストールしていれば同じだと思うけど、違う場合は適宜読み替えで。

<pre lang="bash">
$ pushd /Applications/Processing.app/Contents/Resources/Java/lib
$ cp ../core.jar .
$ popd
</pre>

最後に、config.yamlの修正。

<pre lang="ruby">
p5home: /Applications/Processing.app/Contents/Resources/Java
</pre>

これでサンプルのアプリケーションが実行できるはず。

<pre lang="bash">
 jruby aco.rb examples/basics/arrays/array_objects.rb
</pre><a href="http://ukstudio.jp/wp-content/uploads/2008/12/array_objects.jpg"><img src="http://ukstudio.jp/wp-content/uploads/2008/12/array_objects.jpg" alt="" title="array_objects" width="300" height="253" class="alignnone size-medium wp-image-270" /></a>

後はチュートリアルに従って、サンプルを修正してリアルタイムに変更が反映されるのを楽しみつついろいろ弄ればいいんじゃないかな。(setup内の編集だけは、ウィンドウにフォーカスをあててCmd+rもしくは、Ctrl+rでリロードが必要)

結構、変更がリアルタイムに反映されていくのは楽しい。スケッチっていう観点からしたらわざわざビルドするより、こっちの方が気楽でいいよね。

<iframe src="http://rcm-jp.amazon.co.jp/e/cm?t=2004-05-22&o=9&p=8&l=as1&asins=4873113784&md=1X69VDGQCMF7Z30FM082&fc1=000000&IS2=1&lt1=_blank&m=amazon&lc1=0000FF&bc1=000000&bg1=FFFFFF&f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe>

<iframe src="http://rcm-jp.amazon.co.jp/e/cm?t=2004-05-22&o=9&p=8&l=as1&asins=4861005582&md=1X69VDGQCMF7Z30FM082&fc1=000000&IS2=1&lt1=_blank&m=amazon&lc1=0000FF&bc1=000000&bg1=FFFFFF&f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe>
</div></article><article><h1><a href="/2008/11/27/mac_gem_install_mysql/">2008-11-27 Macでgem install mysqlをする方法</a></h1><hr /><div class="article-body">Rails2.2からmysqlのアダプタが付属していないので各個人でインストールする必要があります。gemで入れようとするとエラーがでると思うので以下のように対応してください。

<pre lang="bash">
$ sudo gem install mysql
$ cd /opt/local/lib/ruby/gems/1.8/gems/mysql-2.7/
$ sudo ruby extconf.rb --with-mysql-config=/opt/local/lib/mysql5/bin/mysql_config
$ sudo make
$ sudo make install
</pre>

パスに関しては、人によって違うかもしれませんが適宜読み替えてください。

追記

<pre lang="bash">
$ sudo gem install mysql -- --with-mysql-config=/opt/local/lib/mysql5/bin/mysql_config
</pre>

これでも大丈夫らしい。
</div></article><article><h1><a href="/2008/11/26/rails_22_i18n/">2008-11-26 Rails2.2のi18n(国際化)を簡単に試してみた</a></h1><hr /><div class="article-body">11月21日にRails2.2が正式リリースされた。 RCなどでチェックしてた人は既に知っているかもしれないけど、2.2からデフォルトでi18n(国際化)対応がされている。

ちなみにi18nというのはinternationalizationの頭と後ろのiとn、文字数が18文字というところから来てるらしい。

とりあえず、まずはアプリの作成。

<pre lang="bash">
$ rails i18n_demo
</pre>

作成されたファイル群の中にconfig/locales/en.ymlというファイルが出来ていると思うけど、これが翻訳ファイルになる。今回は英語と日本語を用意しようと思うので、en.ymlをコピーしてja.ymlを作成する。

<pre lang="bash">
$ cp config/locales/en.yml config/locales/ja.yml
</pre>

翻訳ファイルを修正しようにも、そもそもアプリケーションが出来ていないので、scaffoldで簡単に作ってしまおう。

<pre lang="bash">
$ ruby script/generate scaffold entry title:string body:text
$ rake db:migrate
</pre>

とりあえずは適当にサイトタイトル的なものでも作ってみよう。翻訳ファイルに関しては元々あった内容は削除してしまっていい。

<pre lang="ruby">
# config/locales/ja.yml
ja:
  site_title: サイトタイトル
</pre>

一応英語も。

<pre lang="ruby">
# config/locales/en.yml
en:
  site_title: SiteTitle
</pre>

Viewの修正。

<pre lang="ruby">
# app/views/entries/index.html.erb
<h1>translation missing: en.site_title</h1>
</pre>

この状態でサーバーを起動し、http://localhost:3000/entriesにアクセスしてみる。「SiteTitle」という文字が表示されているはずだ。この状態だとまだ言語がデフォルトの英語の設定になっている。多分、ブラウザの言語設定とかは見てなさげ?。ちょっとソースを見てないのでまだ未確認。もしかしたら、リクエストのヘッダーを見て言語を決める部分は自分で実装しなきゃいけないのかもしれない。

なんにせよ、日本語で表示したい場合は以下のようにする。

<pre lang="ruby">
# config/environment.rb
# 最下行に追加
I18n.default_locale = "ja"
</pre>

これで再度アクセスすれば「サイトタイトル」と表示されているはずだ。

次にGETパラメータで言語が切り替わるようにしてみよう。

<pre lang="ruby">
# app/controllers/application.rb

before_filter :set_locale
def set_locale
  I18n.locale = params[:locale]
end
</pre>

これでhttp://localhost:3000/entries?locale=enで「SiteTitle」と表示されているはずだ。

次にモデルの日本語化をしてみよう。まずはエラーメッセージを出すためにバリデーションを追加する。

<pre lang="ruby">
# app/model/entry.rb
class Entry < ActiveRecord::Base
  validates_presence_of :title, :body
end
</pre>

http://localhost:3000/entry/newでフォームに何も入力せず送信すればエラーがでるので英語で表示されていることを確認する。

<a href="http://ukstudio.jp/wp-content/uploads/2008/11/082611_i18n_en_error.jpg"><img src="http://ukstudio.jp/wp-content/uploads/2008/11/082611_i18n_en_error.jpg" alt="" title="082611_i18n_en_error" width="300" height="281" class="alignnone size-medium wp-image-257" /></a>

普通のバリデーションのエラーとは違うエラーがでているけど、これは翻訳ファイルをちゃんと書いてないからでているエラー。英語の方はちょっと面倒なので無視するが、とりあえず日本語化をすすめる。

<pre lang="ruby">
#config/locales/ja.yml
ja:
  site_title: サイトタイトル
    activerecord:
      errors:
        template:
          header: "{{model}}でエラーが発生しました。"
          body:   以下のエラー内容を確認してください。
        messages:
          blank:  が空白です。
      models:
        entry: エントリー
      attributes:
        entry:
          title: タイトル
          body: 本文
</pre>

以上の修正をして、もう一度エラーを出してみるとエラーが日本語に変わっているはずだ。翻訳ファイルのどの部分がどの部分に対応してるかは雰囲気でわかると思う。

<a href="http://ukstudio.jp/wp-content/uploads/2008/11/081126_i18n_ja_error.jpg"><img src="http://ukstudio.jp/wp-content/uploads/2008/11/081126_i18n_ja_error.jpg" alt="" title="081126_i18n_ja_error" width="300" height="225" class="alignnone size-medium wp-image-258" /></a>

今回は必要な部分だけ翻訳したけど、もうちょっとちゃんとした翻訳ファイルが必要なら<a href="http://i18n-demo.phusion.nl/pages/setup">Railsをローカライズする</a>も参考にするといいと思う。

諸々めんどくせー!って人は松田さんの<a href="http://blog.dio.jp/2008/11/22/japanizing-rails-2-2-by-i18n-generators">Rails 2.2の I18nによる日本語化を最も簡単に行う方法</a>へどうぞ。gemで一発です。

まだ2.2はリリースされたばかりで、i18nまわりの日本語の情報はあまり多くはないと思うけど、そこまで複雑な仕組みでもないし、翻訳ファイルに関して言えば基本的な部分(ActiveRecordとか)は使い回しができるので手間もそこまで大きくはないと思う。ブラウザの言語設定での判断もそのうちプラグインがでてくるんじゃないかと思っている。

「国際化とか必要ないよー」の人も、バリデーションのエラーを日本語化するのにgettextを入れる必要がなくなったりとこれでかなりラクになるんじゃなかろうか。
</div></article><article><h1><a href="/2008/11/23/vimm3-2/">2008-11-23 VimM#3を開催してきました</a></h1><hr /><div class="article-body">﻿﻿﻿﻿﻿﻿﻿﻿﻿本日、VimM#3を東京大学秋葉原キャンパスにて開催してきました。協力頂いた、星さん、笹田さんありがとうございました。また、参加頂いたみなさん、本当にありがとうございました。グダグダな部分もありましたが、無事終えることができました。

以下、簡単な感想。

<h2>Vimで効率的なテキスト編集 - ukstudio</h2>
自分の発表。相変わらず準備不足・・・とりあえず資料。


なるべく、チュートリアルに載っていなくて初心者が知らなそうなものをいくつか選んだつもりだったけど、ちょっと微妙だったかも。

<h2>マクロ - taku-o</h2>
<a href="http://nanasi.jp/">名無しのvim使い</a>のtaku-oさんによるマクロの説明。

実はマクロとか全然使ったことがなかったので参考になりました。なんとなくマクロは避けてた、と言うよりは無理に触れようとしてなかったんだけど仕組み自体は簡単そうなのでちょっと使っていこうかなと。とりあえずこう言うのは無理にでも書かないと感覚が掴めなさそうなのでちょっと頑張る。

<h2>俺の.vimrcを見ろ!PHP使いの為の設定プラグイン - halt</h2>
PHPerである<a href="http://project-p.jp/halt/">halt</a>さんによる発表。

「武士にとっての刀」というフレーズがおれの発表と丸被りで焦ったw autocomplpop.vimの紹介も実は簡単にしようかなと思っていたのだけど、こちらは省いたおかげで被らずに済んだ・・・

PHPのマニュアルをVimのヘルプにコンバートはいいアイディアだなと思った。確かにマニュアルを見るときはプログラミングを書いてるときなので、その方が手間は少なそう。
<h2>operator. the true power of Vim - kana</h2>
<a href="http://whileimautomaton.net/">kana</a>さんによる発表。

Vimの習熟度によってLv0〜Lv7を定義。ちなみにおれはLv3でした。ビジュアルモードを使わなくなってやっとLv4らしい。あとテキストオブジェクトやばい。ライフチェンジン>グとは聞いていたけど、なかなか馴染めなくて後回しにしてたせいで結局身についてない・・・

とりあえず、ap、ipから覚えることにした。ちなみにLv7は1年じっくりVimを使えば辿りつけるらしい。

<h2>第２部 Q&Aセッション</h2>
Lingrだかどっかでkanaさんがボソっと言ったことにより企画したセッション。会場の人に質問してもらって、会場の人に答えてもらう。

正直、始めるまでは「質問なかったらどうしよう」とビクビクしたけど、正直グダグダなところはありつつも結構盛り上がったようなので良かったのかなと。もうちょっとうまく仕切れたらよかったのだけれど。あとマイクとかはあった方が良かったのかもしれない。

それともったいないなぁと終わったあとに思ったのは、質問内容とそれに対する回答を記録してなかったこと。前で仕切りながらやるのは厳しいので誰かにお願いしとけばよかったのかも。


<h2>謝辞</h2>
何はともあれ、なんとか無事に終えることができました。多数のご参加とご協力ありがとうございました!
</div></article><div class="pager"><ul><li class="previous"><a href="/page/23/">Prev</a></li><li class="next"><a href="/page/25/">Next</a></li></ul></div></div></body></html>