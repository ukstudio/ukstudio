<!DOCTYPE html><html><head><meta charset="utf-8" /><!--Always force latest IE rendering engine or request Chrome Frame--><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><meta content="width=device-width,initial-scale=1.0" name="viewport" /><title>ukstudio.jp</title><link href="/stylesheets/dist/normalize.css" rel="stylesheet" /><link href="/stylesheets/dist/skeleton.css" rel="stylesheet" /><link href="/stylesheets/all.css" rel="stylesheet" /><script src="/javascripts/all.js"></script><link href="/feed.xml" rel="alternate" title="atom" type="application/atom+xml" /><script>var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-12755601-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body class="page page_7 page_7_index"><div class="header"><div class="header-title"><h1><a href="/">ukstudio</a></h1></div></div><div class="container"><div class="row"><article class="one"><h1 class="article-title"><a href="/2009/01/09/rspec_result_output_html.erb/">RSpecの結果をHTMLで出力する方法</a></h1><div class="article-time"><time dateMime="2009-01-09 00:00:00 UTC" pubdate="pubdate">January 09 2009</time></div><div class="article-body">RSpecにはオプション-hがあるので、そこでフォーマットを指定してやればいい。以下、Railsの例。

<pre lang="bash">
RAILS_ROOT$ spec spec -f h:spec/spec_report.html
</pre>

これで、specディレクトリにspec_report.htmlが出力される。
</div></article><article class="one"><h1 class="article-title"><a href="/2008/12/31/ruby_book/">Re:Ruby初心者の2冊目はなに?</a></h1><div class="article-time"><time dateMime="2008-12-31 00:00:00 UTC" pubdate="pubdate">December 31 2008</time></div><div class="article-body"><a href="http://anond.hatelabo.jp/20081230213406">Ruby初心者の２冊目はなに？</a>
<a href="http://d.hatena.ne.jp/z/20081231/1230650467">Rubyの「最初の二冊目」は何?　に答えてみる。 - どんなジレンマ</a>

id:hrkt0115311さんに名前を出してもらったことだし、簡単に紹介しておこうと思う。crossreviewに書いてない本も多いしね。と言うかしょっぱなからそうなんだけど。

<h2>Rubyレシピブック第二版</h2>
<a href="http://www.amazon.co.jp/o/ASIN/4797340045/2004-05-22">Rubyレシピブック第二版</a>

id:hrkt0115311さんもすすめてたけど、たのしいRubyを読んだのならこれもオススメ。大体初心者が思うあれがしたい、これがしたいはここを参照すれば載ってると思う。ただ、なにができるかは書いてあるけど、それらで何かを作る方法は書いてないので作りたいものが曖昧だとこれ1冊だとどうしたらいいかわからなくなるかも。

<h2>Rubyで作る奇妙なプログラミング言語</h2>
<a href="http://www.amazon.co.jp/o/ASIN/4839927847/2004-05-22">Rubyで作る奇妙なプログラミング言語</a>

そこでオススメするのがこの「Rubyで作る奇妙なプログラミング言語」。この本1冊あればRubyで言語を実装できるようになる。もちろんタイトルにある通り「奇妙なプログラミング言語」をだけど。もしBrainfuckと言った奇妙な言語を触ったこともない、聞いたこともないと言うのならそれらを知る意味でもこの本をオススメしておく。Brainfuck楽しいよ、Brainfuck。

<h2>初めてのRuby</h2>
<a href="http://www.amazon.co.jp/exec/obidos/ASIN/4873113679/2004-5-22/">初めてのRuby</a>

これまたid:hrkt0115311-22さんと被ってるけど、オススメなのだから仕方がない。まぁ初心者の二冊目としては難しい部類かもしれないが、ある程度Rubyに慣れてきたら読んでみるといいと思う。

ちなみにRubyにも当然<a href="http://www.ruby-lang.org/ja/man/html/index.html">マニュアルが存在する</a>が、初心者が読むには正直内容が難しい。この本を読めばマニュアルが読めるようになると著者のyuguiさんも言っていた記憶があるので、マニュアルの前にこちらを読むことをオススメする。

追記: るりま(Rubyリファレンスマニュアル)の知名度が低いそうなのでリンクを載せておく。まぁメンテされてるのはこっちのはずだから本来はこっちを載せるべきだったのかもしれない。thx Sixeight。
<a href="http://doc.loveruby.net/wiki/">るりまWiki</a>

<h2>恋するプログラム</h2>
<a href="http://www.amazon.co.jp/o/ASIN/4839917299/2004-05-22">恋するプログラム</a>

yharaさんの「Rubyで作る奇妙なプログラミング言語」と同様にこちらも何かを作ることを題材としている。内容も人工無脳を作るというものなのでプログラマなら少なからず心魅かれると思う。まぁちょっと内容が古いかもしれないけど。

だがしかし。これ多分もう売ってないと思う。残念至極。ちょっと前にこの本の出版に関わった人から「復活させたいんだけどねー」と聞いた記憶があるが今のところ特に予定はなさそうだ。

<h2>Enjoy Programming!!</h2>

まぁ大体こんなものか。一応Railsの本ははずしたけど、Webアプリ作りたいなら苦労を知らないとフレームワークの仕組みがわからないとか変に考えずとりあえずやってみればいいと思う。仕組みは後からでもいくらでも学べるし。

とは言うものの、プログラミング自体が初心者のようだからWebプログラミングみたいに言語以外の知識が必要となるものを最初にやろうとすると混乱しがちなのでとりあえずはRubyを中心に学べばいいと思う。Webアプリを作る以外にもプログラミングを楽しむ方法はいくらでもあるし。

Enjoy Programming!!
</div></article><article class="one"><h1 class="article-title"><a href="/2008/12/18/vimrc_reading/">第1回vimrc読書会が開催されるそうです。</a></h1><div class="article-time"><time dateMime="2008-12-18 00:00:00 UTC" pubdate="pubdate">December 18 2008</time></div><div class="article-body"><a href="http://vim.g.hatena.ne.jp/ka-nacht/20081218/1229529163">第1回vimrc読書会開催のお知らせ</a>

だそうです。おもしろそうだなー、参加したいなーとか思ってたら

<blockquote>
肴rc
    id:ukstudioのvimrc
</blockquote>

おれのだ!

当日はtwitterの関西忘年会の二次会真っ最中な気がするけど、イーモバイルで繋げられそうだったら繋げよう。
</div></article><article class="one"><h1 class="article-title"><a href="/2008/12/08/action-coding/">JRubyとProcessing1.1でaction-coding!</a></h1><div class="article-time"><time dateMime="2008-12-08 00:00:00 UTC" pubdate="pubdate">December 08 2008</time></div><div class="article-body">せっかくProcessingも正式版になったことだし、少しaction-codingで遊んでみる。

まずはJRubyをインストール。面倒なのでバイナリで。環境はMac OSX 10.5.5。

<a href="http://dist.codehaus.org/jruby/">http://dist.codehaus.org/jruby/</a>からjruby-bin-1.1.5.tar.gz(バージョンは適宜読み替え)をダウンロード。現時点では1.1.5をインストールしておけば大丈夫だろう。解凍したら適当な位置に移動。

<pre lang="bash">
$ tar zxvf jruby-bin-1.1.5.tar.gz
$ sudo mv jruby-bin1.1.5 /usr/local/bin
</pre>

次にパスを通す。

<pre lang="zsh">
export JRUBY_HOME=/usr/local/bin/jruby-1.1.5
export PATH=/opt/local/ghc/bin:/opt/local/bin:/opt/local/sbin:/usr/local/bin:$JRUBY_HOME/bin:$PATH
</pre>

PATHは環境によって違うと思うので適当に読み替え。sourceで読み込ませてjrubyコマンドが使えればOK。

<pre lang="bash">
$ source ~/.zshrc
$ jruby -v
jruby 1.1.5 (ruby 1.8.6 patchlevel 114) (2008-11-03 rev 7996) [i386-java]
</pre>

次にaction-codingをインストールする。基本的には<a href="http://code.google.com/p/action-coding/wiki/Tutorial">チュートリアル</a>に従っておけばいい。一点だけProcessing1.0からファイルの位置が変っているので以下の作業がいる。Processingのパスは普通にインストールしていれば同じだと思うけど、違う場合は適宜読み替えで。

<pre lang="bash">
$ pushd /Applications/Processing.app/Contents/Resources/Java/lib
$ cp ../core.jar .
$ popd
</pre>

最後に、config.yamlの修正。

<pre lang="ruby">
p5home: /Applications/Processing.app/Contents/Resources/Java
</pre>

これでサンプルのアプリケーションが実行できるはず。

<pre lang="bash">
 jruby aco.rb examples/basics/arrays/array_objects.rb
</pre><a href="http://ukstudio.jp/wp-content/uploads/2008/12/array_objects.jpg"><img src="http://ukstudio.jp/wp-content/uploads/2008/12/array_objects.jpg" alt="" title="array_objects" width="300" height="253" class="alignnone size-medium wp-image-270" /></a>

後はチュートリアルに従って、サンプルを修正してリアルタイムに変更が反映されるのを楽しみつついろいろ弄ればいいんじゃないかな。(setup内の編集だけは、ウィンドウにフォーカスをあててCmd+rもしくは、Ctrl+rでリロードが必要)

結構、変更がリアルタイムに反映されていくのは楽しい。スケッチっていう観点からしたらわざわざビルドするより、こっちの方が気楽でいいよね。

<iframe src="http://rcm-jp.amazon.co.jp/e/cm?t=2004-05-22&o=9&p=8&l=as1&asins=4873113784&md=1X69VDGQCMF7Z30FM082&fc1=000000&IS2=1&lt1=_blank&m=amazon&lc1=0000FF&bc1=000000&bg1=FFFFFF&f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe>

<iframe src="http://rcm-jp.amazon.co.jp/e/cm?t=2004-05-22&o=9&p=8&l=as1&asins=4861005582&md=1X69VDGQCMF7Z30FM082&fc1=000000&IS2=1&lt1=_blank&m=amazon&lc1=0000FF&bc1=000000&bg1=FFFFFF&f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe>
</div></article><article class="one"><h1 class="article-title"><a href="/2008/11/27/mac_gem_install_mysql/">Macでgem install mysqlをする方法</a></h1><div class="article-time"><time dateMime="2008-11-27 00:00:00 UTC" pubdate="pubdate">November 27 2008</time></div><div class="article-body">Rails2.2からmysqlのアダプタが付属していないので各個人でインストールする必要があります。gemで入れようとするとエラーがでると思うので以下のように対応してください。

<pre lang="bash">
$ sudo gem install mysql
$ cd /opt/local/lib/ruby/gems/1.8/gems/mysql-2.7/
$ sudo ruby extconf.rb --with-mysql-config=/opt/local/lib/mysql5/bin/mysql_config
$ sudo make
$ sudo make install
</pre>

パスに関しては、人によって違うかもしれませんが適宜読み替えてください。

追記

<pre lang="bash">
$ sudo gem install mysql -- --with-mysql-config=/opt/local/lib/mysql5/bin/mysql_config
</pre>

これでも大丈夫らしい。
</div></article><article class="one"><h1 class="article-title"><a href="/2008/11/26/rails_22_i18n/">Rails2.2のi18n(国際化)を簡単に試してみた</a></h1><div class="article-time"><time dateMime="2008-11-26 00:00:00 UTC" pubdate="pubdate">November 26 2008</time></div><div class="article-body">11月21日にRails2.2が正式リリースされた。 RCなどでチェックしてた人は既に知っているかもしれないけど、2.2からデフォルトでi18n(国際化)対応がされている。

ちなみにi18nというのはinternationalizationの頭と後ろのiとn、文字数が18文字というところから来てるらしい。

とりあえず、まずはアプリの作成。

<pre lang="bash">
$ rails i18n_demo
</pre>

作成されたファイル群の中にconfig/locales/en.ymlというファイルが出来ていると思うけど、これが翻訳ファイルになる。今回は英語と日本語を用意しようと思うので、en.ymlをコピーしてja.ymlを作成する。

<pre lang="bash">
$ cp config/locales/en.yml config/locales/ja.yml
</pre>

翻訳ファイルを修正しようにも、そもそもアプリケーションが出来ていないので、scaffoldで簡単に作ってしまおう。

<pre lang="bash">
$ ruby script/generate scaffold entry title:string body:text
$ rake db:migrate
</pre>

とりあえずは適当にサイトタイトル的なものでも作ってみよう。翻訳ファイルに関しては元々あった内容は削除してしまっていい。

<pre lang="ruby">
# config/locales/ja.yml
ja:
  site_title: サイトタイトル
</pre>

一応英語も。

<pre lang="ruby">
# config/locales/en.yml
en:
  site_title: SiteTitle
</pre>

Viewの修正。

<pre lang="ruby">
# app/views/entries/index.html.erb
<h1>translation missing: en.site_title</h1>
</pre>

この状態でサーバーを起動し、http://localhost:3000/entriesにアクセスしてみる。「SiteTitle」という文字が表示されているはずだ。この状態だとまだ言語がデフォルトの英語の設定になっている。多分、ブラウザの言語設定とかは見てなさげ?。ちょっとソースを見てないのでまだ未確認。もしかしたら、リクエストのヘッダーを見て言語を決める部分は自分で実装しなきゃいけないのかもしれない。

なんにせよ、日本語で表示したい場合は以下のようにする。

<pre lang="ruby">
# config/environment.rb
# 最下行に追加
I18n.default_locale = "ja"
</pre>

これで再度アクセスすれば「サイトタイトル」と表示されているはずだ。

次にGETパラメータで言語が切り替わるようにしてみよう。

<pre lang="ruby">
# app/controllers/application.rb

before_filter :set_locale
def set_locale
  I18n.locale = params[:locale]
end
</pre>

これでhttp://localhost:3000/entries?locale=enで「SiteTitle」と表示されているはずだ。

次にモデルの日本語化をしてみよう。まずはエラーメッセージを出すためにバリデーションを追加する。

<pre lang="ruby">
# app/model/entry.rb
class Entry < ActiveRecord::Base
  validates_presence_of :title, :body
end
</pre>

http://localhost:3000/entry/newでフォームに何も入力せず送信すればエラーがでるので英語で表示されていることを確認する。

<a href="http://ukstudio.jp/wp-content/uploads/2008/11/082611_i18n_en_error.jpg"><img src="http://ukstudio.jp/wp-content/uploads/2008/11/082611_i18n_en_error.jpg" alt="" title="082611_i18n_en_error" width="300" height="281" class="alignnone size-medium wp-image-257" /></a>

普通のバリデーションのエラーとは違うエラーがでているけど、これは翻訳ファイルをちゃんと書いてないからでているエラー。英語の方はちょっと面倒なので無視するが、とりあえず日本語化をすすめる。

<pre lang="ruby">
#config/locales/ja.yml
ja:
  site_title: サイトタイトル
    activerecord:
      errors:
        template:
          header: "{{model}}でエラーが発生しました。"
          body:   以下のエラー内容を確認してください。
        messages:
          blank:  が空白です。
      models:
        entry: エントリー
      attributes:
        entry:
          title: タイトル
          body: 本文
</pre>

以上の修正をして、もう一度エラーを出してみるとエラーが日本語に変わっているはずだ。翻訳ファイルのどの部分がどの部分に対応してるかは雰囲気でわかると思う。

<a href="http://ukstudio.jp/wp-content/uploads/2008/11/081126_i18n_ja_error.jpg"><img src="http://ukstudio.jp/wp-content/uploads/2008/11/081126_i18n_ja_error.jpg" alt="" title="081126_i18n_ja_error" width="300" height="225" class="alignnone size-medium wp-image-258" /></a>

今回は必要な部分だけ翻訳したけど、もうちょっとちゃんとした翻訳ファイルが必要なら<a href="http://i18n-demo.phusion.nl/pages/setup">Railsをローカライズする</a>も参考にするといいと思う。

諸々めんどくせー!って人は松田さんの<a href="http://blog.dio.jp/2008/11/22/japanizing-rails-2-2-by-i18n-generators">Rails 2.2の I18nによる日本語化を最も簡単に行う方法</a>へどうぞ。gemで一発です。

まだ2.2はリリースされたばかりで、i18nまわりの日本語の情報はあまり多くはないと思うけど、そこまで複雑な仕組みでもないし、翻訳ファイルに関して言えば基本的な部分(ActiveRecordとか)は使い回しができるので手間もそこまで大きくはないと思う。ブラウザの言語設定での判断もそのうちプラグインがでてくるんじゃないかと思っている。

「国際化とか必要ないよー」の人も、バリデーションのエラーを日本語化するのにgettextを入れる必要がなくなったりとこれでかなりラクになるんじゃなかろうか。
</div></article><article class="one"><h1 class="article-title"><a href="/2008/11/23/vimm3-2/">VimM#3を開催してきました</a></h1><div class="article-time"><time dateMime="2008-11-23 00:00:00 UTC" pubdate="pubdate">November 23 2008</time></div><div class="article-body">﻿﻿﻿﻿﻿﻿﻿﻿﻿本日、VimM#3を東京大学秋葉原キャンパスにて開催してきました。協力頂いた、星さん、笹田さんありがとうございました。また、参加頂いたみなさん、本当にありがとうございました。グダグダな部分もありましたが、無事終えることができました。

以下、簡単な感想。

<h2>Vimで効率的なテキスト編集 - ukstudio</h2>
自分の発表。相変わらず準備不足・・・とりあえず資料。


なるべく、チュートリアルに載っていなくて初心者が知らなそうなものをいくつか選んだつもりだったけど、ちょっと微妙だったかも。

<h2>マクロ - taku-o</h2>
<a href="http://nanasi.jp/">名無しのvim使い</a>のtaku-oさんによるマクロの説明。

実はマクロとか全然使ったことがなかったので参考になりました。なんとなくマクロは避けてた、と言うよりは無理に触れようとしてなかったんだけど仕組み自体は簡単そうなのでちょっと使っていこうかなと。とりあえずこう言うのは無理にでも書かないと感覚が掴めなさそうなのでちょっと頑張る。

<h2>俺の.vimrcを見ろ!PHP使いの為の設定プラグイン - halt</h2>
PHPerである<a href="http://project-p.jp/halt/">halt</a>さんによる発表。

「武士にとっての刀」というフレーズがおれの発表と丸被りで焦ったw autocomplpop.vimの紹介も実は簡単にしようかなと思っていたのだけど、こちらは省いたおかげで被らずに済んだ・・・

PHPのマニュアルをVimのヘルプにコンバートはいいアイディアだなと思った。確かにマニュアルを見るときはプログラミングを書いてるときなので、その方が手間は少なそう。
<h2>operator. the true power of Vim - kana</h2>
<a href="http://whileimautomaton.net/">kana</a>さんによる発表。

Vimの習熟度によってLv0〜Lv7を定義。ちなみにおれはLv3でした。ビジュアルモードを使わなくなってやっとLv4らしい。あとテキストオブジェクトやばい。ライフチェンジン>グとは聞いていたけど、なかなか馴染めなくて後回しにしてたせいで結局身についてない・・・

とりあえず、ap、ipから覚えることにした。ちなみにLv7は1年じっくりVimを使えば辿りつけるらしい。

<h2>第２部 Q&Aセッション</h2>
Lingrだかどっかでkanaさんがボソっと言ったことにより企画したセッション。会場の人に質問してもらって、会場の人に答えてもらう。

正直、始めるまでは「質問なかったらどうしよう」とビクビクしたけど、正直グダグダなところはありつつも結構盛り上がったようなので良かったのかなと。もうちょっとうまく仕切れたらよかったのだけれど。あとマイクとかはあった方が良かったのかもしれない。

それともったいないなぁと終わったあとに思ったのは、質問内容とそれに対する回答を記録してなかったこと。前で仕切りながらやるのは厳しいので誰かにお願いしとけばよかったのかも。


<h2>謝辞</h2>
何はともあれ、なんとか無事に終えることができました。多数のご参加とご協力ありがとうございました!
</div></article><article class="one"><h1 class="article-title"><a href="/2008/11/14/rubygems_update/">RubyGemsのupdateの方法が変わっていた</a></h1><div class="article-time"><time dateMime="2008-11-14 00:00:00 UTC" pubdate="pubdate">November 14 2008</time></div><div class="article-body">せっかくMerb1.0がでたことだしインストールしてみようかと思ったら、gemを1.3以上いれやがれ!と怒られてしまった。それならアップデートするかーと思い、update --systemをやってsuccessと出たはいいけど、gem -vで1.2と表示される。MacPortsの方でアップデートして、1.3入れても-vは1.2でなんぞーとか思っていたらupdateの方法が変わってたみたい。

以下、update手順。

<ol>
<li><a href="http://rubyforge.org/frs/?group_id=126&release_id=16500">RubyForge</a>からrubygems-upate-1.3.1.gemをダウンロード</li>
<li><pre lang="bash">$ sudo gem install rubygems-update-1.3.1.gem</pre></li>
<li>update_rubygemsというコマンドができてるので実行。
<pre lang="bash">$ sudo update_rubygems</pre></li>
<li>完了</li>
</ol>

これで無事、RubyGemsの1.3.1がインストールされた。

<pre lang="bash">
$ gem -v
1.3.1
</pre>

<pre lang="bash">
$ sudo gem install merb
・・・
・・・
37 gems installed
</pre>

これでOK。37gems installedってのも凄いな。
</div></article><article class="one"><h1 class="article-title"><a href="/2008/11/10/skitch/">Skitchでキャプチャアップロード</a></h1><div class="article-time"><time dateMime="2008-11-10 00:00:00 UTC" pubdate="pubdate">November 10 2008</time></div><div class="article-body"><a href="http://d.hatena.ne.jp/snow-bell/20081110/1226249937">セキュリティの教訓 - snow-bellの日記</a>

snow-bellのところでgyazoのセキュリティが話題になってたので、ちょっとレスもかねてエントリー書く。

<a href="http://skitch.com/">Skitch.com</a>

今、オレが使ってるツールはgyazoじゃなくてSkitchというものを使ってる。デモが上で見れるのでそれを見てもらえばどんなものか大体わかるはず。

基本的な用途は、キャプチャ->編集->アップロード。大体gyazoと同じ。オレがgyazoを使わない理由は、画像の削除と公開範囲が指定できないってところが大きい。嘘です、先にSkitchを使ってたからです。

Skitchでできることは大体下記のとおり。

<ul>
<li>スクリーンキャプチャ</li>
<li>簡単な編集</li>
<li>アップロード</li>
<li>公開(非公開設定も可能)</li>
<li>アップロードした画像の削除</li>
</li>

アップロードした画像はskitch.comにログインすると自分のページから一覧することができる。
<div class="thumbnail"><a href="http://skitch.com/ukstudio/5rxm/skitch-sample"><img src="http://img.skitch.com/20081110-tr84wa9qcxag6cyj23954hfc5g.preview.jpg" alt="skitch-sample" /></a><br /><span style="font-family: Lucida Grande, Trebuchet, sans-serif, Helvetica, Arial; font-size: 10px; color: #808080">Uploaded with <a href="http://plasq.com/">plasq</a>'s <a href="http://skitch.com">Skitch</a>!</span></div>

アップロードした画像にはそれぞれにURLが割り当てられて、コピーしてすぐ使うことができる。

<img src="http://img.skitch.com/20081110-m89den1adars4y7qrahbsakdc2.jpg" alt="skitch-sample2"/>

ちなみにこのエントリーで使った画像もSkitchでキャプチャしたものです。多分、gyazoの方がアップロードの手間は少ないのかもしれないけど、編集(文字入れたいときとかたまにある)や、画像の削除、一覧がラクなのでSkitch愛用してます。
</div></article><article class="one"><h1 class="article-title"><a href="/2008/11/07/vimrc/">「地味に便利なVim設定」をもうちょい地味に便利にする</a></h1><div class="article-time"><time dateMime="2008-11-07 00:00:00 UTC" pubdate="pubdate">November 07 2008</time></div><div class="article-body"><a href="http://blog.blueblack.net/item_317">地味に便利なVim設定 - ナレッジエース</a>

いくつかもうちょい便利にできるよーってところがあったので書いてみる。

<h2>スペース + wで保存</h2>
別に¥¥で保存でもいいと思うけど、ちょっと指が遠い気がする。ので僕はスペース + wで保存してる。同じ要領でquitも。
<pre lang="vim">
nnoremap <space>w :<c-u>write<cr>
nnoremap <space>q :<c-u>quit<cr>
</pre>

<h2>jとkでカーソルキーを中心に保ってスクロール</h2>
わざわざスペースを使わなくてもできる。gj、gkにしておくと表示行で上下に移動できるので折り返しの行があるときとかに便利。
<pre lang="vim">
nnoremap j gjzz
nnoremap k gkzz
</pre>

ちなみに僕のvimrcはgithubに公開してあるのでよかったら参考にどうぞ。そんな大したものでもないですが。

<a href="http://github.com/ukstudio/config/tree/master">.vimrc at master from ukstudio's config - GitHub</a>
</div></article><article class="one"><h1 class="article-title"><a href="/2008/10/28/todo/">RTMとか挫折するので自分に合うTODO管理を考えてみた</a></h1><div class="article-time"><time dateMime="2008-10-28 00:00:00 UTC" pubdate="pubdate">October 28 2008</time></div><div class="article-body">RTMとか今までに数回使おうとして、なぜかいつも使わなくなる。RTM自体は使いやすいんだけど、多分ブラウザベースが合わないんだろう。CUIでタスク管理したい!って思って以前試したけど(名前わすれちゃった)、なんかそれも合わなかった。

んで、今回自分なりに考えたToDo管理は下のような感じ。ちなみにオレの使ってるOSはMacな。Linuxでも大丈夫だと思うけど。windowsはしらん。

<ul>
<li>ToDoの作成は「touch todo名.txt」</li>
<li>ToDoの詳細はそのファイルに書き込めばいい</li>
<li>終わったToDoは「rm todo名.txt」</li>
<li>プロジェクトや階層分けしたかったら「mkdir project名」</li>
<li>オンライン管理はdropboxかgitとか</li>
</ul>

正直、ToDo作るときはブラウザでBTSみながらとか作るので、ブラウザでToDOを作るのは相性が悪い。それに対してMacのTerminalはブラウザとセットで開いてることが多い(webプログラマだからね)、ブラウザで見ながらToDoを作るのは非常にラク。

なにより、touch、rm、mkdir、mvといったコマンドは普段から日常的に使っているのですぐ馴染みそう。あと、この方式の利点はunix系のコマンドが使えることかな。grepとかfindとかsortとか。

オンライン管理はとりあえず必要性を感じてないけれど、最近流行りのdropboxとかgitとかでいいかなと思ってる。変更履歴とか差分とか見たかったらgitだけどそこまでする必要も感じてないし、dropboxでいいのかな。iPhone対応してるらしいし。iPhoneもってないけどさ。

そんな感じでしばらく試してみることにする。
</div></article><article class="one"><h1 class="article-title"><a href="/2008/10/27/xss/">XSS対策に入力時エスケープは非常にややこしい</a></h1><div class="article-time"><time dateMime="2008-10-27 00:00:00 UTC" pubdate="pubdate">October 27 2008</time></div><div class="article-body">to-Rさんの<a href="http://blog.webcreativepark.net/2008/10/24-201629.html">XSSの脆弱性を限りなくなくす方法</a>を読んでなんかもにょもにょしたのでエントリーを書く。多分、to-Rさんはこれから書くことに関して理解してて、あの対策を行なってるのかもしれないけど、それでも書く。自分の勉強も兼てるので変なところがあれば教えていただけるとありがたいです。

入力時エスケープは非常に<strong>ややこしい</strong>

確かに、入力値に必ずエスケープしておけば、XSS対策漏れにはなるかもしれない。けれど非常にややこしいことになる。

例えば、受け取ったデータの文字列に対して文字数制限のバリデーションを行なうときにわざわざアンエスケープの処理を行なわないといけないし、DBへの保存の際にもアンエスケープが必要になる。ブログとかでフォームから受け取ったデータのうち、一部のタグは許容するときとかもかな。

<blockquote>
ベストの対策はアプリの性質に合わせたエスケープなんだけども、これって完全になくすにはかなりの几帳面さが必要になるんじゃないかなと思います。(規模が大きくなればなるほど)
</blockquote>

とエントリーでは書かれているけど、この対策が大規模になればなるほどXSSに限らず色々な問題が発生する気がする。大規模であればあるほど、出力箇所をみて「対策されている」というのがわかるのが大事。

コードを書きながら「DBに保存するからアンエスケープ・・・」「スクリプトとして出力するからアンエスケープ」って考えるよりは、「HTMLの出力時にエスケープ」の方がわかりやすいはず。出力時をみればいいんだから。

ちなみにフレームワークやテンプレートエンジンが出力時のエスケープをデフォルトで行なうってのは賛成です。なぜなら使っているフレームワークまたはテンプレートエンジンがエスケープしているということが自明なら、エスケープの有無を確認する必要がなくなるから。PHPとかWeb特化とか言うぐらいなら、デフォルトでエスケープして出力すればいいのにと思う。

なんかXSS対策とかエスケープって言い方がよくない気もするな。普通に「スクリプトを無効にする」とかで良い気がしてきた。スクリプトが有効になるのは、HTML出力時なんだからその時に無効化すればいいよね。

というか、PHPの人はmagick quoteでこりたと思ってたんだけど。

<h2>追記</h2>
ブクマコメ、高木さんより。
<blockquote>
「普通に「スクリプトを無効にする」とかで良い気がしてきた」&lt; XSSはスクリプトだけじゃない。&gt;iframe&lt;の挿入&lt;form&gt;の挿入を考えてみるよろし。CERT CA-2000-02ではXSSと呼ばず「Malicious HTML Tags Embedded in Client Web Requests」と呼んだ
</blockquote>

あー、確かにそうですね。指摘ありがとうございます。Malicious HTML Tags Embedded in Client Web Requestsは初耳でした。
</div></article><article class="one"><h1 class="article-title"><a href="/2008/10/06/vimm3/">VimM#3開催のお知らせ</a></h1><div class="article-time"><time dateMime="2008-10-06 00:00:00 UTC" pubdate="pubdate">October 06 2008</time></div><div class="article-body">11月の22日(土)の14時からVimM#3を開催します。

今回のテーマは「脱初心者」ということでなるべくなら初心者の方に来てもらいたいなと思っています。なんかメンバーみると結構「おまえ初心者じゃないだろう!」て人がいるので、負けずに初心者の方もいっぱい来てください。

スピーカーもまだ募集しているので応募お待ちしております。

今回の会場もささださんとほしさんにご協力頂きました。二回連続にわたりありがとうございます。

<a href="http://wiki.livedoor.jp/biowithit/d/VimM%233">VimM#3</a>
</div></article><article class="one"><h1 class="article-title"><a href="/2008/10/04/rails_many_db/">RailsでMySQLとPostgreSQLを同時に扱う方法(+問題点)</a></h1><div class="article-time"><time dateMime="2008-10-04 00:00:00 UTC" pubdate="pubdate">October 04 2008</time></div><div class="article-body">プラグインとか無しで、複数のDB(MySQLとPostgreSQL)を扱う方法。Rails2.1でしか試してないけど、多分1.2とかでも大丈夫。多分。MySQLとPostgreSQLの接続ライブラリはgemからインストールしておくこと。

まずは、database.ymlに扱うデータベースの定義を書く。

<pre lang="ruby">
development:
  adapter: mysql
  encoding: utf8
  database: db_development
  username: root
  password:

test:
(面倒だから略)

production:
(面倒だから略)

psql_development:
  adapter: postgres
  encoding: utf8
  database: ma2_mcd
  username: root
  password:

psql_test:
(面倒だから略)

psql_production:
(面倒だから略)

</pre>

次にPostgreSQLに接続させたいモデルを編集する。例えば、ProfileモデルはPostgreSQLの方に接続させたい場合は以下のようになる。

<pre lang="ruby">
class Profile < ActiveRecord::Base
  establish_connection("psql_#{RAILS_ENV}".to_sym)
end
</pre>

establish_connectionにシンボルでdatabase.ymlの定義を渡せば、そのモデルはその定義のデータベースに接続する。本番、テスト、開発でそれぞれ定義が違うだろうから、RAILS_ENVで今起動している環境の定義を呼び出すようにしてやる。

<h2>追記</h2>
上記の設定で一応アプリは動作するけど、いくつか問題点があるのでそれをメモしておく。

<h3>マイグレーションの使い分けはどうする</h3>
例えば、db/migrateにcreate_hoge_for_psql.rb(数値は略)とcreate_foo_for_mysql.rbと合った場合、それをどう実行するかが問題になってくる。

普通にrake db:migrateやrake db:migrate RAILS_ENV=psql_developmentとやったら、hogeとfooが両方とも作られてしまう。こちらとして望んでるのは、hogeがPostgreSQLのみ、fooがMySQLのみにできて欲しい。

うーむ、弱った。
</div></article><article class="one"><h1 class="article-title"><a href="/2008/09/19/no_use_number_prime/">数字を使わずに素数判定</a></h1><div class="article-time"><time dateMime="2008-09-19 00:00:00 UTC" pubdate="pubdate">September 19 2008</time></div><div class="article-body">86のSkypeチャットで話題になったのでちょこちょこっと書いた。普通にループして比較するだけお。もっといい方法あるんだろうけど、とりあえずはよしとする。

<pre lang="ruby">
class Integer
  def prime?
    return false if self.zero? || self == [[]].size
    ([[],[]].size...self).each do |i|
      return false if (self%i).zero?
    end
    true
  end
end
</pre>

suztomoのやつ。
<a href="http://d.hatena.ne.jp/suztomo/20080918/1221746629">http://d.hatena.ne.jp/suztomo/20080918/1221746629</a>
</div></article><article class="one"><h1 class="article-title"><a href="/2008/09/18/firefox/">MacでFirefoxのプロファイルの使い分けと別バージョンの同時起動をする</a></h1><div class="article-time"><time dateMime="2008-09-18 00:00:00 UTC" pubdate="pubdate">September 18 2008</time></div><div class="article-body">Firefoxのプロファイルの使い分け(普段用/開発用)と別バージョン(2.0と3.1)の同時起動がしたかったのでちょっと設定してみた。

<h2>プロファイルの作成</h2>
まずは使い分けるためのプロファイルを作成する。今回作成したのは以下の3つ。
<ul>
<li>Firefox3.1</li>
<li>Firefox3.1_development</li>
<li>Firefox2.0</li>
</ul>

プロファイルの作成の仕方はTerminalから-Pオプションを付けて、Firefoxを起動させればいい。

<pre lang="bash">
$ /Applications/Firefox.app/Contents/MacOS/firefox -P
</pre>

プロファイルマネージャーが開くのでそこで「新しいプロファイルを作成」を選び、わかりやすいように名前をつける。

<h2>起動コマンドの作成</h2>
プロファイルを指定して起動させるには-P "プロファイル名"のオプションを付ける必要がある。毎回Terminalで指定して起動させるのも手間なので、起動コマンド用に3つ程ファイルを作成する。(後でapp化する)

ちなみにこんなことしなくても、複数のプロファイルがあれば起動時に使用するプロファイルを聞かれるので必要ない人は別にしなくても大丈夫。

<h3>Firefox3.1普段用</h3>
<pre lang="shell">
#!/bin/sh

/Applications/Shiretoko.app/Contents/MacOS/firefox -P Firefox3.1 &
exit 0
</pre>

<h3>Firefox3.1開発用</h3>
<pre lang="shell">
#!/bin/sh

/Applications/Shiretoko.app/Contents/MacOS/firefox -P Firefox3.1_development &
exit 0
</pre>

<h3>Firefox2.0</h3>
<pre lang="shell">
#!/bin/sh

/Applications/Firefox.app/Contents/MacOS/firefox -P Firefox2.0 -no-remote &
exit 0
</pre>

Firefox2.0のにだけ、-no-remoteオプションが付いているのは、同時起動を想定している為。別のバージョンを同時に起動する場合は、大抵は最初に起動しておく方は-no-remoteオプションは無し、後から起動する方に-no-remoteオプションを付けるようにしておけばいい。
<h2>app化</h2>
起動コマンドを作ったところで、せっかくなのでそれをapp化する。

app化に関しては<a href="http://www.pqrs.org/tekezo/macosx/doc/makeapp/">[Mac OS X] シェルスクリプトとかの CUI アプリケーションを Mac OS X 方式の .app にする方法 [簡単 5 ステップ]</a>を参照。

上記エントリのcore.shの部分をさっき作った起動コマンドスクリプトに置き換えればOK。Firefoxのアイコンは/Applications/Firefox.app/Contents/Resources/firefox.icnsを使用。Shiretokoのアイコンを使いたければ、/Applications/Shiretoko.app/(ry から取ってくればいい。

あとはapp化したのを直接クリックするなり、QuickSilverから呼びだすようにしておけばいい。

<table  border="0" cellpadding="5"><tr><td colspan="2"><a href="http://www.amazon.co.jp/Firefox-Hacks-Mozilla%E3%83%86%E3%82%AF%E3%83%8E%E3%83%AD%E3%82%B8%E5%BE%B9%E5%BA%95%E6%B4%BB%E7%94%A8%E3%83%86%E3%82%AF%E3%83%8B%E3%83%83%E3%82%AF-%E6%B1%9F%E6%9D%91-%E7%A7%80%E4%B9%8B/dp/487311375X%3FSubscriptionId%3D0G91FPYVW6ZGWBH4Y9G2%26tag%3D2004-05-22%26linkCode%3Dxm2%26camp%3D2025%26creative%3D165953%26creativeASIN%3D487311375X" target="_blank">Firefox 3 Hacks Mozillaテクノロジ徹底活用テクニック</a><img src='http://www.assoc-amazon.jp/e/ir?t=2004-05-22&l=ur2&o=9' width='1' height='1' border='0' alt='' /></td></tr><tr><td valign="top"><a href="http://www.amazon.co.jp/Firefox-Hacks-Mozilla%E3%83%86%E3%82%AF%E3%83%8E%E3%83%AD%E3%82%B8%E5%BE%B9%E5%BA%95%E6%B4%BB%E7%94%A8%E3%83%86%E3%82%AF%E3%83%8B%E3%83%83%E3%82%AF-%E6%B1%9F%E6%9D%91-%E7%A7%80%E4%B9%8B/dp/487311375X%3FSubscriptionId%3D0G91FPYVW6ZGWBH4Y9G2%26tag%3D2004-05-22%26linkCode%3Dxm2%26camp%3D2025%26creative%3D165953%26creativeASIN%3D487311375X" target="_blank"><img src="http://ecx.images-amazon.com/images/I/41664CPo6pL._SL160_.jpg" border="0" alt="Firefox 3 Hacks Mozillaテクノロジ徹底活用テクニック" /></a></td><td valign="top"><font size="-1">江村 秀之<br /><br />オライリージャパン  2008-08-27<br />売り上げランキング : 11045<br /><br /><br /><a href="http://www.amazon.co.jp/Firefox-Hacks-Mozilla%E3%83%86%E3%82%AF%E3%83%8E%E3%83%AD%E3%82%B8%E5%BE%B9%E5%BA%95%E6%B4%BB%E7%94%A8%E3%83%86%E3%82%AF%E3%83%8B%E3%83%83%E3%82%AF-%E6%B1%9F%E6%9D%91-%E7%A7%80%E4%B9%8B/dp/487311375X%3FSubscriptionId%3D0G91FPYVW6ZGWBH4Y9G2%26tag%3D2004-05-22%26linkCode%3Dxm2%26camp%3D2025%26creative%3D165953%26creativeASIN%3D487311375X" target="_blank">Amazonで詳しく見る</a></font><font size="-2"> by <a href="http://www.goodpic.com/mt/aws/index.html" >G-Tools</a></font></td></tr></table>
</div></article><article class="one"><h1 class="article-title"><a href="/2008/09/18/firefox_addon/">Firefoxの拡張の整理</a></h1><div class="article-time"><time dateMime="2008-09-18 00:00:00 UTC" pubdate="pubdate">September 18 2008</time></div><div class="article-body">1つ前の記事でプロファイルの使い分けの設定をしたけど、整理もかねて~/Library/Application Support/Firefoxを削除して、1から構築しなおした。

<h2>拡張のインストール</h2>
<h3>開発/普段共通</h3>
<dl>
<dt>Nightly Tester Tools</dt>
<dd>今、メインに使っているのがShiretoko(Firefox3.1α2)なので、これを入れないと動かない拡張が多い</dd>
<dt>Vimperator</dt>
<dd>Firefoxをvimみたいに操作。もうこいつがないと生きていけない体になってしまった。</dd>
<dt>XUL/Migemo</dt>
<dd>Vimpでmigemo_hint.jsを使うために。</dd>
<dt>GreaseMonkey</dt>
<dd>あんまりグリモンは使っていなくてAutopagerizeぐらいかな。でも必須。</dd>
</dl>

<h3>開発</h3>
<dl>
<dt>Web Developer</dt>
<dd>HTMLやCSSいじったりするときに。ブロック要素の枠表示が一番使用率高いかも。</dd>
<dt>Firebug</dt>
<dd>JavaScriptを書くときに。Inspect Element(日本語だと要素を表示とかだっけ?)が地味に便利。</dd>
<dt>Live HTTP Headers<dt>
<dd>ブラウザがどんなリクエストを送って、どんなレスポンスを受けとってるか調べるときに。HTTPステータスとか。</dd>
<dt>HTML Validator</dt>
<dd>名前のとおり。タグの閉じ忘れとかもわかる。</dd>
<dt>SQLite Manager</dt>
<dd>RailsでたまにSQLiteを使うのでその時に。</dd>
<dt>SeleniumIDE</dt>
<dd>Seleniumのテストケースを作る時に。ブラウザが勝手に動くのはおもしろい。</dd>
<dt>RestTest</dt>
<dd>RESTアプリのテストに。GET/POST/PUT/DELETEのヘッダを偽装。</dd>
</dl>

大体こんな感じか。普段は基本的に閲覧しかしないので、vimpとグリモンがあればOK。他の拡張はほとんど開発のときにしか使わないので、必要なときだけ読み込めばいい。

vimpのプラグインと設定ファイルに関しては、<a href="http://github.com/ukstudio/config/tree/master">githubに置いてある</a>ので、それをもってくるだけ。

とりあえずこんなもんかなー。
</div></article><article class="one"><h1 class="article-title"><a href="/2008/09/09/firefox3_1/">Firefoxα2とβ1preを試してみた</a></h1><div class="article-time"><time dateMime="2008-09-09 00:00:00 UTC" pubdate="pubdate">September 09 2008</time></div><div class="article-body">いつのまにかFirefoxのα2とβ1preがリリースされてたので試してみた。個人的にVimpとかグリモンがないとどうにもならない体になってしまったので<a href="https://addons.mozilla.org/ja/firefox/addon/6543">Nightly Tester Tools</a>をインストール。これで3.01で動いていた拡張は大体動く模様。

それとTraceMonkeyを使えるようにするためabout:configを開いて、「jit」で検索。2項目ほどヒットするので、それぞれの値をfalseからtrueに変更する。これでTraceMonkeyはONになるみたい。

使ってみた感想をざっと過剰書きであげてみると

<ul>
<li>レンダリングが結構向上しているのが体感でわかる。</li>
<li>Mac版FirefoxのFLAHの日本語入力問題が解決してるっぽい。</li>
<li>β1preでLDRを開いたらちゃんと表示されなかった。α2は大丈夫。</li>
<li>Ctrl+Tabがかっこいい。でもvimp使ってると関係ない話。</li>
</ul>

ざっとこんな感じ。レンダリングの向上がかなりうれしい。今のところβの方でLDRが表示できなかったこと以外特に問題は起きていない。まぁLDRが見れないのは致命的なのでとりあえずα2の方を使っていこうと思う。

TraceMonkeyに関しては、オン、オフそれぞれ試したけど普通に使っている分には違いがわからなかった。オフでも十分はやくなっている。ベンチマークをとったらもしかしたら違うのかもしれないけど。

なんにせよ、個人的には今回のα2とβ1preには非常に満足しているので、正式リリースが楽しみになってきた。

<a href="http://developer.mozilla.org/devnews/index.php/2008/09/05/firefox-31-alpha-2-now-available-for-download/">Mozilla開発者向け公式ブログの記事</a>
<a href="ftp://ftp.mozilla.org/pub/firefox/nightly/latest-trunk/">Firefox3.1β1pre</a>
<a href="https://wiki.mozilla.org/JavaScript:TraceMonkey#Playing_with_TraceMonkey">TraceMonkeyの有効化</a>
</div></article><article class="one"><h1 class="article-title"><a href="/2008/09/07/vimm_railsvim/">VimM#2でRails.vimについて話してきました</a></h1><div class="article-time"><time dateMime="2008-09-07 00:00:00 UTC" pubdate="pubdate">September 07 2008</time></div><div class="article-body"><a href="http://wiki.livedoor.jp/biowithit/d/VimM%232">VimM#2</a>

とりあえず資料。正直、これだけ見てもさっぱりな資料だとは思いますがw


Vimの人達の集りでRails.vimというRails使う人限定のプラグインの話はどうなんだろーとか思っていたけど、結構Rails使ってる人いたみたいでよかった。

発表内容自体はかなりgdgdというか、伝えたいことをうまく伝えられなかったなーと言った感じ。やっぱり事前に練習しとくべき。あとは慣れかなー。しばらくは積極的に発表する側で頑張りたい。

それと、RSpecの具体的な対応については<a href="http://ukstudio.jp/2008/06/05/rails_vim_rspec/">rails.vimのファイル切り替えをRSpecに対応させる(仮)</a>を参照。

それにしても、エディタ1つで4時間(懇親会含めるともっとある)発表があって、それに40人集まるってのもすごい話だ。

あと、VimMのMはみみのMらしいです。VimM#2はmickey24がうさみみをつけて主催するそうです。期待。
</div></article><article class="one"><h1 class="article-title"><a href="/2008/08/31/web_design_questionnaire/">wuたんのWebデザインに関するアンケートにご協力を。</a></h1><div class="article-time"><time dateMime="2008-08-31 00:00:00 UTC" pubdate="pubdate">August 31 2008</time></div><div class="article-body"><strong>結果が公開されています</strong>
<a href="http://3ping.org/2008/08/31/0120">Webデザインに関するアンケート結果</a>
<hr />

<a href="http://3ping.org/2008/08/31/0120">Web デザインに関するアンケートにご協力ください - 3ping.org</a>

このブログはWebデザイナよりは、プログラマ、エンジニアと言った方が多いと思うのですが、よろしかったらご協力お願いします。以下のフォームからでも回答可能です。結果は公開してもらえるようです。よろしくお願いします。

<div style="margin: 1em 20px; border: 7px solid #eee; padding: 20px;"><iframe src="http://spreadsheets.google.com/embeddedform?key=pqZ008056mIlxmXskWwiMbg" width="310" height="1319" frameborder="0" marginheight="0" marginwidth="0">読込中...</iframe></div>
</div></article></div><div class="row"><div class="pager one"><ul><li class="previous"><a href="/page/6/">Prev</a></li><li class="next"><a href="/page/8/">Next</a></li></ul></div></div></div></body></html>