<!DOCTYPE html><html><head><meta charset="utf-8" /><!--Always force latest IE rendering engine or request Chrome Frame--><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><!--Use title if it's in the page YAML frontmatter--><title>ukstudio.jp</title><link href="http://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet" type="text/css" /><link href="/stylesheets/normalize.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/all.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/highlight.css" media="screen" rel="stylesheet" type="text/css" /><script src="/javascripts/all.js" type="text/javascript"></script><link href="/feed.xml" rel="alternate" title="atom" type="application/atom+xml" /><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-12755601-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body class="page page_18 page_18_index"><div class="cointainer-fluid"><div class="navbar navbar-default" role="navigation"><div class="container-fluid"><div class="navbar-header"><a class="navbar-brand" href="/">UKSTUDIO</a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li><a href="http://twitter.com/ukstudio">Twitter</a></li><li><a href="http://github.com/ukstudio">GitHub</a></li></ul></div></div></div></div><div class="container"><article><h1><a href="/2009/11/02/testing_private_method/">2009-11-02 RSpecでprivateメソッドをテストする</a></h1><hr /><div class="article-body"><script src="http://gist.github.com/223674.js"></script>

Object#send(__send__)ならメソッドの呼び出し制限に関わらずメソッドを呼び出すことが可能なので、privateメソッドもテスト可能。

確か、1.9以降はメソッド呼び出し制限がObject#sendにも影響するとどこかで見た記憶があるのだけど結局そうはなっていないみたい。

1.9.1、1.8.7で確認済み。

ちなみにオマケ。
<script src="http://gist.github.com/223679.js"></script>

Pythonはメソッド名の前にアンダースコアを2つけるとprivateなメソッドになるのだけれど、実際のところ別名でメソッドを定義してそちらを呼び出してるっぽい。別名で定義された方はprivateではないので、そちらを呼び出してテストすることが可能。

他にもJavaだったらsetAccessible(True)を実行すればpublicなメソッドに変更されるのでテスト可能。と聞いただけで確認はしていない。
</div></article><article><h1><a href="/2009/10/06/web_trustee_company/">2009-10-06 Web系受託会社は亡びる</a></h1><hr /><div class="article-body">やけに煽ってるタイトルだけど、別にそんな大した話でもない。最近個人的に思ってることをつらつらと書く。

まず、Web系受託会社の定義だけどまぁWebサービスやWebアプリケーションなど比較的規模の小さいものを受託で作っているところとする。「規模の小さい」も割と感覚的なものだけど、まぁその辺の詳細は省く。

で、なんでまた亡びるとか言いだしたのかと言うとこの程度の規模のものは外部に開発を依頼するより、自分達で作る内製に向かっていくんじゃないと思っている為。特に最近の不景気でエンジニアを雇って内部で作るという流れがあるように見える。少なくとも僕のまわりでは。現にそういう話で「うちこない?」的なことも何度か言われている。受託会社に勤めている身としてはうちに発注してよと思わなくもないが、なかなかそうも行かないらしい。

まぁ個人的にはWebサービス、アプリケーションに限らず、いわゆる業務システムも内製した方がいいと思ってるからまぁこの流れは歓迎してると言えばしてるんだけど、受託会社としてはちょっとやばいかなと。

要は今まで発注してくれてた会社が自分達で作るようになって、受託会社に仕事がこなくなるからやばいんじゃないのって話。業務システムとか割と規模の大きい仕事を受けてるところはまだ大丈夫だと思う。 それよりWebサービス、アプリケーションをメインで受託してる会社がやばい。

なんでやばいかと言うと、ちょっと優秀なエンジニアなら1人で作れるものが多い。例えばSNS(ブームは去ったけどね)を作ろうとなったときに、外部に依頼するよりエンジニア1人とデザイナ1人雇えば十分だと思うし、僕自身作れる自信がある。まぁSNSと言っても規模は色々あるんだろうけど。

まぁさっきも言ったように、内製するのは歓迎だしそれはそれでいいんだけど、受託会社として今後どうするのかって話。

いくつか思いつくのは、業務システム系に手を出す、売るものを作る(パッケージ開発)、自社サービス(広告、課金)とかとか。まぁどれが正解とかわからんし、もしかしたら他にも道があるかも。

そんなことを考える日々です。他のWeb系受託の人たちはどう考えてるんだろうねー。
</div></article><article><h1><a href="/2009/10/02/ruby-freaks/">2009-10-02 Ruby Freaks Loungeに記事を書きました</a></h1><hr /><div class="article-body"><a href="http://gihyo.jp/dev/serial/01/ruby/0021">第21回　Railsアプリの受け入れテストをCucumberで書こう</a>

<a href="http://d.hatena.ne.jp/onering/">榊さん</a>の紹介で、Ruby Freaks Loungeに記事を書かせて頂きました。ありがとうございます。内容はCucumberについて。割と自分のブログに書いた内容や、WEB+DBのRails特集で書いたことと被ってるかな。

あともう一回、記事を書く予定なのでそっちでは実際にRailsアプリのテストをCucumberで書く記事にするつもり。チュートリアル形式的な。

感想とか突っ込みとかあれば教えて頂けるとうれしいです。次回もお楽しみに。
</div></article><article><h1><a href="/2009/09/24/gae_account_for_android/">2009-09-24 Android携帯しか持っていない人がGAEのアカウントを作る方法</a></h1><hr /><div class="article-body">今月の頭の話だけど、GAEのアカウントを作った。

ただ、GAEのアカウントを作るには携帯の認証が必要で、携帯のアドレスにメールを送ってもらいそれを受け取る必要がある。アドレスを入力する際はセレクトボックスでドメインを選ぶ形式だった。

僕はHT-03A(Android携帯)しか持っていなくて、かつDoCoMoのメールアドレスを契約していないので、gmailしかメールアドレスを持っていないことになる。だけど、そのセレクトボックスにはGmailのドメインが一覧に表示されていない。

仕方がないので、Googleにメールで問い合わせたところ、割と早い時間で返信がきた。内容は「こちらでアカウントを作ったからそれを使うといいよ」というもの。その時についったーでつぶやいな発言が<a href="http://twitter.com/ukstudio/status/3751146391">これ</a>。

メールは英語で書いたけど、単語を適当に羅列したような英語でも通じたのでまぁGAEをいじろうとしてるような人ならなんとかなる。問い合わせのメールアドレスはどこで見つけたか忘れたけど、そんなに見つけにくい場所ではなかった気がする。

Android携帯しかもっていなくて、GAEアカウントを作るのにどうしたらいいか困っている人がいたら参考になるかと思って書いた。
</div></article><article><h1><a href="/2009/08/25/multiruby/">2009-08-25 Ruby1.8.7とRuby1.9.2を共存させる</a></h1><hr /><div class="article-body"><strong>現在は、以下の方法より<a href="http://rvm.beginrescueend.com/">rvm</a>を使うことをオススメします。 10/05/28 追記</strong>

ローカルに開発環境としてRuby1.8.7とRuby1.9.2を共存させる方法。

<h2>Rubyのインストール</h2>
まずはRubyの処理系をインストール。<a href="http://www.ruby-lang.org/ja/">ruby-lang.org</a>から適当に落とす。今回はruby 1.8.7-p174とruby 1.9.2-preview1を使用。

まず、Ruby1.9.2から。

<pre><code>$ ./configure --prefix=/Users/uk/local --program-suffix=-1.9.2
$ make
$ make install
</code></pre>

--prefixでインストール箇所を指定。自分の$HOME以下のどこかにいれるのが最近のマイブーム。この後でてくるgemも$HOME以下。Rubyはともかくgemは$HOME以下を推奨する。ある程度有名なライブラリならいいが、適当な野良ライブラリをインストールするにはこちらの方が安心な為。

--program-suffixを指定するとインストールしたバイナリの後ろに指定した文字列を付加できる。この例だと「ruby-1.9.2」となる。他の処理系と分けるためこの指定は必須。

次に同じ要領で1.8.7もインストール。やることは同じ。

<pre><code>$ ./configure --prefix/Users/uk/local --program-suffix=-1.8.7
$ make
$ make install
</code></pre>

これでそれぞれのバイナリが/Users/uk/local/binに入っている状態となる。

<h2>RubyGems</h2>
次にgemの設定。Ruby1.9からはgemが標準で入っている為、インストールは必要ない。ただバージョンが1.3.4なのでアップデートしておくといいだろう。

1.8.7は別途gemをインストールする。<a href="http://rubyforge.org/projects/rubygems/">RubyForgeにプロジェクトがある</a>のでそこからダウンロードしてくる。

<pre><code>$ ruby-1.8.7 setup.rb
</code></pre>

それぞれのgemのenvを見ておくと、インストールしたライブラリがどこに保存されるかわかる。

<pre><code>$ gem-1.9.2 env
$ gem-1.8.7 env
</code></pre>

それぞれ、GEM PATHSの先頭が/Users/uk/local/lib/ruby/gems/1.8と/Users/uk/local/lib/ruby/gems/1.9.1(何で1.9.2じゃないのかはわからん)になっているはずだ。今後、gemを使ってライブラリをインストールするときはsudoは必要ない。

<h2>シンボリックリンク</h2>
この時点でRuby1.9.2とRuby1.8.7がそれぞれ使える状態になってはいるが、いちいちバージョンを指定するのも面倒なので、シンボリックリンクで対応する。riとかも必要に応じて作る。

<pre><code>$ ln -s ~/local/bin/ruby-1.8.7 ~/local/bin/ruby
$ ln -s ~/local/bin/irb-1.8.7 ~/local/bin/irb
$ ln -s ~/local/bin/gem-1.8.7 ~/local/bin/gem
</code></pre>

Ruby1.9.2を使いたいときは、一度シンボリックリンクを消し、再度作りなおす。

とは言え、その作業を手動で行うのは手間なのでスクリプトで対応するのがオススメ。5分ぐらいで書いたスクリプトをgistに貼っておいた。実行権限を与えて、引数にバージョンを与えると使えるはずだ。PATHとCMDは適当に書き換えること。そのうちもうちょっとマシなものに書き直すかも。

<script src="http://gist.github.com/174406.js"></script>

<h2>まとめ</h2>
とりあえず、こんな感じでRuby1.9.2とRuby1.8.7を共存させてみた。いくつか、気になる点があって例えばgemでRailsをインストールするとシェバングが「#!/Users/uk/local/bin/ruby-1.9.2」となっており、シンボリックリンクを用意しただけではダメな時もある。その時はとりあえず諦めて以下の様に実行している。

<pre><code>$ ruby -S Rails hoge
</code></pre>

実際にこの環境で開発するのはこれからなので、もしかしたらそのうち色々な問題もでてくる可能性はあるが、とりあえずこの環境でやってみようと思う。
</div></article><div class="pager"><ul><li class="previous"><a href="/page/17/">Prev</a></li><li class="next"><a href="/page/19/">Next</a></li></ul></div></div></body></html>